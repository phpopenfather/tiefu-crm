(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-1fea"],{"/zI9":function(t,e,i){},"38eC":function(t,e,i){},"3INs":function(t,e,i){"use strict";var s=i("Qvkk");i.n(s).a},"3Odx":function(t,e,i){"use strict";var s=i("Frxy");i.n(s).a},B6tz:function(t,e,i){"use strict";var s=i("/zI9");i.n(s).a},BDeq:function(t,e,i){},Bn8P:function(t,e,i){"use strict";var s=i("xerP");i.n(s).a},CTrc:function(t,e,i){"use strict";var s=i("zkFX");i.n(s).a},Csel:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAYAAAA7bUf6AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjU0OTlCOUZDRERCMjExRTg4MjVEQ0RGOThFMUY2OTEyIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjU0OTlCOUZERERCMjExRTg4MjVEQ0RGOThFMUY2OTEyIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NTQ5OUI5RkFEREIyMTFFODgyNURDREY5OEUxRjY5MTIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NTQ5OUI5RkJEREIyMTFFODgyNURDREY5OEUxRjY5MTIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5iPiS9AAAAY0lEQVR42mI8c+aMLQMDw0IgVmQgHdwH4jgmIDEHiNOBmJEMDNI3lxHokv9QAXLBfyYGKoBRQzABC7bQJkIfIyFDGEdjZxAZcguIXcjUD9J3CxTFKUC8CIgVyDDkARDHAgQYANTlEN4TaBTMAAAAAElFTkSuQmCC"},Frxy:function(t,e,i){},GBpN:function(t,e,i){"use strict";i.r(e);var s=i("conU"),n={name:"FollowLogTypeSet",components:{},data:function(){return{loading:!1,list:[]}},created:function(){this.getDetail()},methods:{getDetail:function(){var t=this;this.loading=!0,Object(s.q)().then(function(e){t.loading=!1,t.list=e.data.map(function(t){return{value:t}})}).catch(function(){t.loading=!1})},addItem:function(){this.list.push({value:""})},deleteItem:function(t,e){this.list.splice(e,1)},save:function(){for(var t=this,e=[],i=0;i<this.list.length;i++){var n=this.list[i];n.value&&e.push(n.value)}this.loading=!0,Object(s.p)({value:e}).then(function(e){t.loading=!1,t.$message.success(e.data)}).catch(function(){t.loading=!1})}}},a=(i("Bn8P"),i("KHd+")),o=Object(a.a)(n,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[i("div",{staticClass:"content-title"},[i("span",[t._v("跟进记录类型设置")]),t._v(" "),i("el-button",{staticClass:"rt",attrs:{type:"primary",size:"medium"},on:{click:t.save}},[t._v("保存")])],1),t._v(" "),i("div",{staticClass:"content-body"},[t._l(t.list,function(e,s){return i("div",{key:s,staticClass:"input-item"},[i("el-input",{model:{value:e.value,callback:function(i){t.$set(e,"value",i)},expression:"item.value"}}),t._v(" "),i("i",{staticClass:"el-icon-remove",on:{click:function(i){t.deleteItem(e,s)}}})],1)}),t._v(" "),i("el-button",{attrs:{type:"text"},on:{click:t.addItem}},[t._v("+添加类型")])],2)])},[],!1,null,"ed172c9c",null);o.options.__file="followLogTypeSet.vue";var l=o.exports,c=i("KTTK"),r={props:{businessDialogVisible:Boolean,businessTitle:String,infoData:{type:Object,default:function(){return{}}}},data:function(){return{optionsDep:[],businessDep:[],settingList:[],name:"",winSingle:100,loseSingle:0,invalidSingle:0}},watch:{infoData:function(t){this.name=t.name,this.businessDep=t.businessDep.map(function(t,e){return t.id}),this.settingList=t.settingList,this.settingList&&0!=this.settingList.length||(this.settingList=[{name:"",rate:""}])}},mounted:function(){var t=this;Object(c.i)().then(function(e){t.optionsDep=e.data})},methods:{businessClose:function(){this.$emit("businessClose")},businessSubmit:function(){if(this.name)if(this.businessDep){for(var t=!0,e=0;e<this.settingList.length;e++){var i=this.settingList[e];if(!i.name||!i.rate){t=!1,this.$message.error("请完善阶段信息");break}}t&&this.$emit("businessSubmit",this.name,this.businessDep,this.settingList,this.businessTitle,this.infoData.type_id)}else this.$message.error("请关联应用部门");else this.$message.error("请填写商机组名称")},addIcon:function(){this.settingList.push({name:"",rate:""})},removeIcon:function(t){this.settingList.splice(t,1),this.changeInput()},changeInput:function(t,e){}}},u=(i("3Odx"),Object(a.a)(r,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{attrs:{title:t.businessTitle,visible:t.businessDialogVisible,"before-close":t.businessClose,width:"600px"},on:{"update:visible":function(e){t.businessDialogVisible=e}}},[i("div",{staticClass:"business-list"},[i("div",{staticClass:"business-label"},[t._v("商机组名称")]),t._v(" "),i("el-input",{staticStyle:{width:"60%"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),t._v(" "),i("div",{staticClass:"business-list"},[i("div",{staticClass:"business-label"},[t._v("应用部门")]),t._v(" "),i("el-select",{staticStyle:{width:"60%"},attrs:{placeholder:"请选择",multiple:""},model:{value:t.businessDep,callback:function(e){t.businessDep=e},expression:"businessDep"}},t._l(t.optionsDep,function(t){return i("el-option",{key:t.id,attrs:{label:t.label,value:t.id}})})),t._v(" "),i("div",{staticClass:"business-des"},[t._v("默认全公司")])],1),t._v(" "),i("div",{staticClass:"business-setting"},[i("div",[t._v("阶段设置")]),t._v(" "),i("div",{staticClass:"business-setting-content"},[i("div",{staticClass:"business-setting-table-header"},[i("span",[t._v("阶段")]),t._v(" "),i("span",[t._v("阶段名称")]),t._v(" "),i("span",[t._v("赢单率")])]),t._v(" "),i("div",{staticClass:"business-setting-table-body"},[t._l(t.settingList,function(e,s){return i("div",{key:s,staticClass:"business-setting-table"},[i("span",[t._v(t._s("阶段"+(s+1)))]),t._v(" "),i("span",[i("el-input",{attrs:{size:"mini"},model:{value:e.name,callback:function(i){t.$set(e,"name",i)},expression:"item.name"}})],1),t._v(" "),i("span",{staticClass:"icon-span"},[i("el-input",{attrs:{size:"mini",type:"number"},on:{change:t.changeInput},model:{value:e.rate,callback:function(i){t.$set(e,"rate",i)},expression:"item.rate"}}),t._v(" %\n            "),i("span",{staticClass:"icon-box"},[i("span",{staticClass:"el-icon-circle-plus",on:{click:t.addIcon}}),t._v(" "),0!=s?i("span",{staticClass:"el-icon-remove",on:{click:function(e){t.removeIcon(s)}}}):t._e()])],1)])}),t._v(" "),i("div",{staticClass:"business-setting-table"},[i("span",[t._v("结束")]),t._v(" "),i("span",[t._v("赢单")]),t._v(" "),i("span",[t._v(t._s(t.winSingle)+" %")])]),t._v(" "),i("div",{staticClass:"business-setting-table"},[i("span",[t._v("结束")]),t._v(" "),i("span",[t._v("输单")]),t._v(" "),i("span",[t._v(t._s(t.loseSingle)+" %")])]),t._v(" "),i("div",{staticClass:"business-setting-table"},[i("span",[t._v("结束")]),t._v(" "),i("span",[t._v("无效")]),t._v(" "),i("span",[t._v(t._s(t.invalidSingle)+" %")])])],2)])]),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:t.businessSubmit}},[t._v("确 定")]),t._v(" "),i("el-button",{on:{click:t.businessClose}},[t._v("取 消")])],1)])},[],!1,null,"37d4e0fb",null));u.options.__file="businessDialog.vue";var d=u.exports,p=i("7Qib"),h=i("wd/R"),m=i.n(h),g={name:"BusinessGroupSet",components:{BusinessDialog:d},data:function(){return{loading:!1,tableHeight:document.documentElement.clientHeight-320,businessObj:{name:"",businessDep:[],settingList:""},businessData:[],businessList:[{label:"商机组名称",field:"name"},{label:"应用部门",field:"structure_id"},{label:"创建时间",field:"create_time"},{label:"创建人",field:"create_user_id"}],businessDialogVisible:!1,businessTitle:"添加商机组",currentPage:1,pageSize:10,pageSizes:[10,20,30,40],total:0}},created:function(){var t=this;window.onresize=function(){t.tableHeight=document.documentElement.clientHeight-320},this.getBusinessGroupList()},methods:{headerCellStyle:function(t,e){return{background:"#F2F2F2"}},handleSizeChange:function(t){this.pageSize=t,this.getBusinessGroupList()},handleCurrentChange:function(t){this.currentPage=t,this.getBusinessGroupList()},getBusinessGroupList:function(){var t=this;this.loading=!0,Object(s.c)({page:this.currentPage,limit:this.pageSize}).then(function(e){t.loading=!1,t.businessData=e.data.list,t.total=e.data.dataCount}).catch(function(){t.loading=!1})},fieldFormatter:function(t,e){if("structure_id"==e.property){var i="";if(n=t[e.property+"_info"])for(var s=0;s<n.length;s++)i=i+n[s].name+(s===n.length-1?"":"、");return i||"全公司"}return"create_time"==e.property?0!=t[e.property]&&t[e.property]?m()(Object(p.e)(t[e.property])).format("YYYY-MM-DD HH:mm:ss"):"":"create_user_id"==e.property?(n=t[e.property+"_info"])?n.realname:"":t[e.property];var n},businessEdit:function(t){var e=this;Object(s.d)({id:t.type_id}).then(function(i){var s=[];i.data.status&&(s=i.data.status),e.businessObj={type_id:t.type_id,name:t.name,businessDep:t.structure_id_info,settingList:s},e.businessDialogVisible=!0,e.businessTitle="编辑商机组"}).catch(function(){})},businessDelect:function(t){var e=this;this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(s.b)({id:t.row.type_id}).then(function(i){e.businessData.splice(t.$index,1),e.$message.success("删除成功")}).catch(function(){})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},addBusiness:function(){this.businessObj={name:"",businessDep:[],settingList:""},this.businessDialogVisible=!0,this.businessTitle="添加商机组"},businessClose:function(){this.businessDialogVisible=!1},businessSubmit:function(t,e,i,n,a){var o=this,l=null,c={name:t,structure_id:e,status:i};"添加商机组"==n?l=s.a:(c.type_id=a,l=s.e),l(c).then(function(t){o.$message.success(t.data),o.getBusinessGroupList(),o.businessClose()}).catch(function(){})}}},v=(i("dl6e"),Object(a.a)(g,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[i("div",{staticClass:"content-title"},[i("span",[t._v("商机组设置")]),t._v(" "),i("el-button",{staticClass:"rt",attrs:{type:"primary",size:"medium"},on:{click:t.addBusiness}},[t._v("添加商机组")])],1),t._v(" "),i("div",{staticClass:"business-table"},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.businessData,height:t.tableHeight,"header-cell-style":t.headerCellStyle,stripe:""}},[t._l(t.businessList,function(e,s){return i("el-table-column",{key:s,attrs:{prop:e.field,label:e.label,formatter:t.fieldFormatter,"show-overflow-tooltip":""}})}),t._v(" "),i("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){t.businessEdit(e.row)}}},[t._v("编 辑")]),t._v(" "),i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){t.businessDelect(e)}}},[t._v("删 除")])]}}])})],2),t._v(" "),i("div",{staticClass:"p-contianer"},[i("el-pagination",{staticClass:"p-bar",attrs:{"current-page":t.currentPage,"page-sizes":t.pageSizes,"page-size":t.pageSize,total:t.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"update:pageSize":function(e){t.pageSize=e},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1),t._v(" "),i("business-dialog",{attrs:{"info-data":t.businessObj,"business-dialog-visible":t.businessDialogVisible,"business-title":t.businessTitle},on:{businessClose:t.businessClose,businessSubmit:t.businessSubmit}})],1)},[],!1,null,"2035b49c",null));v.options.__file="businessGroupSet.vue";var b=v.exports,f={name:"ProductCategorySet",components:{},data:function(){return{loading:!1,treeData:[],treeSetTypes:[],productHandleDialog:!1,productForm:{name:"",type:"",pid:"",category_id:""},defaultProps:{children:"children",label:"label"}}},created:function(){this.getProductCategoryIndex()},methods:{getChild:function(t){this.treeSetTypes=[{type:"create-child",name:"新建子分类"},{type:"create-brother",name:"新建平级分类"},{type:"edit",name:"编辑分类"},{type:"delete",name:"删除分类"}].map(function(e,i,s){return e.node=t,e})},handleTreeSetDrop:function(t){var e=this;"create-one"==t.type&&(this.productForm.type=t.type,this.productForm.name="",this.productHandleDialog=!0),"create-child"==t.type?(this.productForm.type=t.type,this.productForm.pid=t.node.data.category_id,this.productForm.name="",this.productHandleDialog=!0):"create-brother"==t.type?(this.productForm.type=t.type,this.productForm.pid=t.node.data.pid,this.productForm.name="",this.productHandleDialog=!0):"edit"==t.type?(this.productForm.type=t.type,this.productForm.name=t.node.data.name,this.productForm.category_id=t.node.data.category_id,this.productForm.pid=t.node.data.pid,this.productHandleDialog=!0):"delete"==t.type&&this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$message({type:"success",message:"删除成功!"}),e.loading=!0,Object(s.u)({id:t.node.data.category_id}).then(function(t){e.getProductCategoryIndex(),e.loading=!1}).catch(function(){e.loading=!1})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},handleProduct:function(){var t=this;0!=this.productForm.name.length?(this.productHandleDialog=!1,"create-one"==this.productForm.type&&(this.loading=!0,Object(s.w)({name:this.productForm.name}).then(function(e){t.getProductCategoryIndex(),t.loading=!1}).catch(function(){t.loading=!1})),"create-child"==this.productForm.type?(this.loading=!0,Object(s.w)({pid:this.productForm.pid,name:this.productForm.name}).then(function(e){t.getProductCategoryIndex(),t.loading=!1}).catch(function(){t.loading=!1})):"create-brother"==this.productForm.type?(this.loading=!0,Object(s.w)({pid:this.productForm.pid,name:this.productForm.name}).then(function(e){t.getProductCategoryIndex(),t.loading=!1}).catch(function(){t.loading=!1})):"edit"==this.productForm.type&&(this.loading=!0,Object(s.x)({id:this.productForm.category_id,pid:this.productForm.pid,name:this.productForm.name}).then(function(e){t.getProductCategoryIndex(),t.loading=!1}).catch(function(){t.loading=!1}))):this.$message({message:"请填写名称",type:"warning"})},getProductCategoryIndex:function(){var t=this;this.loading=!0,Object(s.v)({type:"tree"}).then(function(e){t.loading=!1,t.treeData=e.data}).catch(function(){t.loading=!1})}}},y=(i("CTrc"),Object(a.a)(f,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[t._m(0),t._v(" "),s("div",{staticClass:"product-setting"},[s("div",{staticClass:"product-setting-con"},[s("div",[s("span",{staticClass:"el-icon-plus",staticStyle:{color:"#409EFF"}}),t._v(" "),s("el-button",{attrs:{type:"text"},nativeOn:{click:function(e){t.handleTreeSetDrop({type:"create-one"})}}},[t._v("新增一级分类")])],1),t._v(" "),s("div",{staticClass:"tree-box"},[s("el-tree",{attrs:{data:t.treeData,props:t.defaultProps,"default-expand-all":""},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.node;return e.data,s("flexbox",{staticClass:"node-data"},[n.expanded?s("img",{staticClass:"node-img",attrs:{src:i("Csel")}}):t._e(),t._v(" "),n.expanded?t._e():s("img",{staticClass:"node-img",attrs:{src:i("zXZL")}}),t._v(" "),s("div",{staticClass:"node-label"},[t._v(t._s(n.label))]),t._v(" "),s("el-dropdown",{attrs:{trigger:"click"},on:{command:t.handleTreeSetDrop}},[s("div",{staticClass:"node-label-set",on:{click:function(e){e.stopPropagation(),t.getChild(n)}}},[t._v("设置")]),t._v(" "),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.treeSetTypes,function(e,i){return s("el-dropdown-item",{key:i,attrs:{command:e}},[t._v(t._s(e.name))])}))],1)],1)}}])})],1)])]),t._v(" "),s("el-dialog",{attrs:{visible:t.productHandleDialog,title:"提示",width:"400px"},on:{"update:visible":function(e){t.productHandleDialog=e}}},[s("el-form",{attrs:{model:t.productForm}},[s("el-form-item",{attrs:{label:"类别名称","label-width":"80"}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:t.productForm.name,callback:function(e){t.$set(t.productForm,"name",e)},expression:"productForm.name"}})],1)],1),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.productHandleDialog=!1}}},[t._v("取 消")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:t.handleProduct}},[t._v("确 定")])],1)],1)],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"content-title"},[e("span",[this._v("产品类别设置")])])}],!1,null,"7adbf71b",null));y.options.__file="productCategorySet.vue";var _=y.exports,C={name:"ContractExpireSet",components:{},data:function(){return{loading:!1,contractDay:0,contractConfig:"0"}},created:function(){this.getDetail()},methods:{getDetail:function(){var t=this;this.loading=!0,this.$store.dispatch("CRMSettingConfig").then(function(e){t.loading=!1,t.contractDay=e.data.contract_day,t.contractConfig=e.data.contract_config}).catch(function(){t.loading=!1})},save:function(){var t=this;this.loading=!0;var e={};1==this.contractConfig?(e.contract_day=this.contractDay,e.contract_config=1):e.contract_config=0,Object(s.k)(e).then(function(e){t.loading=!1,t.$message.success(e.data)}).catch(function(){t.loading=!1})}}},D=(i("3INs"),Object(a.a)(C,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[i("div",{staticClass:"content-title"},[i("span",[t._v("合同到期提醒设置")]),t._v(" "),i("el-button",{staticClass:"rt",attrs:{type:"primary",size:"medium"},on:{click:t.save}},[t._v("保存")])],1),t._v(" "),i("div",{staticClass:"content-body"},[i("div",{staticClass:"tips"},[t._v("设置提前提醒天数之后，根据合同的”合同到期时间”计算提醒时间")]),t._v(" "),i("div",{staticClass:"set-content"},[i("el-radio",{attrs:{label:"0"},model:{value:t.contractConfig,callback:function(e){t.contractConfig=e},expression:"contractConfig"}},[t._v("不提醒")]),t._v(" "),i("el-radio",{attrs:{label:"1"},model:{value:t.contractConfig,callback:function(e){t.contractConfig=e},expression:"contractConfig"}},[t._v("提前提醒天数")]),t._v(" "),1==t.contractConfig?i("div",{staticClass:"time-set"},[i("el-input",{model:{value:t.contractDay,callback:function(e){t.contractDay=e},expression:"contractDay"}}),i("span",[t._v("天")])],1):t._e()],1)])])},[],!1,null,"1da2376f",null));D.options.__file="contractExpireSet.vue";var I=D.exports,E={name:"EditCustomerLimit",components:{XhStrucUserCell:i("8GhS").m},props:{types:[String,Number],visible:{type:Boolean,default:!1},action:{type:Object,default:function(){return{type:"save"}}}},data:function(){return{is_deal:1,value:"",users:[],strucs:[]}},computed:{valueLabel:function(){return{1:"拥有客户数上限（个）",2:"锁定客户数上限（个）"}[this.types]},dealLabel:function(){return{1:"成交客户是否占有拥有客户数：",2:"成交客户是否占有锁定客户数："}[this.types]},title:function(){return"update"==this.action.type?"编辑规则":"添加规则"},showDeal:function(){return 1==this.types}},watch:{visible:function(t){var e=this;if(t)if("save"==this.action.type)this.clearInfo();else if("update"==this.action.type){var i=this.action.data;this.is_deal=i.is_deal,this.value=i.value,this.$nextTick(function(){e.users=i.user_ids_info,e.strucs=i.structure_ids_info})}}},mounted:function(){},methods:{close:function(){this.$emit("update:visible",!1)},strcUserChange:function(t){this.users=t.value.users,this.strucs=t.value.strucs},sure:function(){var t=this;if((this.users.length||this.strucs.length)&&this.value){var e={save:s.n,update:s.o}[this.action.type],i={user_ids:this.users.map(function(t){return t.id}),structure_ids:this.strucs.map(function(t){return t.id}),value:this.value,types:this.types};this.showDeal&&(i.is_deal=this.is_deal),"update"==this.action.type&&(i.id=this.action.data.id),e(i).then(function(e){t.$emit("success"),t.close()}).catch(function(){})}else this.$message.error("请完善信息")},clearInfo:function(){this.users=[],this.strucs=[],this.is_deal=1,this.value=""}}},w=(i("tb0o"),Object(a.a)(E,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{attrs:{visible:t.visible,title:t.title,"append-to-body":!0,"before-close":t.close,width:"550px"},on:{"update:visible":function(e){t.visible=e}}},[i("div",{staticClass:"position-relative"},[i("flexbox",{staticClass:"handle-item",attrs:{align:"stretch"}},[i("div",{staticClass:"handle-item-name",staticStyle:{"margin-top":"8px"}},[t._v("适用范围：")]),t._v(" "),i("xh-struc-user-cell",{staticStyle:{width:"100%"},attrs:{users:t.users,strucs:t.strucs},on:{"value-change":t.strcUserChange}})],1),t._v(" "),i("flexbox",{staticClass:"handle-item",attrs:{align:"stretch"}},[i("div",{staticClass:"handle-item-name",staticStyle:{"margin-top":"8px"}},[t._v(t._s(t.valueLabel))]),t._v(" "),i("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1),t._v(" "),t.showDeal?i("flexbox",{staticClass:"handle-item"},[i("div",{staticClass:"handle-item-name"},[t._v(t._s(t.dealLabel))]),t._v(" "),i("el-radio-group",{model:{value:t.is_deal,callback:function(e){t.is_deal=e},expression:"is_deal"}},[i("el-radio",{attrs:{label:1}},[t._v("是")]),t._v(" "),i("el-radio",{attrs:{label:0}},[t._v("否")])],1)],1):t._e()],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{nativeOn:{click:function(e){return t.close(e)}}},[t._v("取消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.sure}},[t._v("确 定")])],1)])},[],!1,null,"3b6bebfd",null));w.options.__file="editCustomerLimit.vue";var S={name:"CustomerLimitSet",components:{EditCustomerLimit:w.exports},props:{types:[String,Number]},data:function(){return{loading:!1,tableHeight:document.documentElement.clientHeight-320,list:[],showAddEdit:!1,action:{},currentPage:1,pageSize:10,pageSizes:[10,20,30,40],total:0}},computed:{title:function(){return{1:"拥有客户数限制",2:"锁定客户数限制"}[this.types]},fieldList:function(){var t=[{label:"适用范围",field:"scope"},{label:{1:"拥有客户数上限",2:"锁定客户数上限"}[this.types],field:"value"}];return 1==this.types&&t.push({label:{1:"成交客户是否占有拥有客户数",2:"成交客户是否占有锁定客户数"}[this.types],field:"is_deal"}),t}},watch:{types:function(){this.list=[],this.getList()}},created:function(){var t=this;window.onresize=function(){t.tableHeight=document.documentElement.clientHeight-320},this.getList()},methods:{headerCellStyle:function(t,e){return{background:"#F2F2F2"}},handleSizeChange:function(t){this.pageSize=t,this.getList()},handleCurrentChange:function(t){this.currentPage=t,this.getList()},getList:function(){var t=this;this.loading=!0,Object(s.m)({page:this.currentPage,limit:this.pageSize,types:this.types}).then(function(e){t.loading=!1,t.list=e.data.list,t.total=e.data.dataCount}).catch(function(){t.loading=!1})},fieldFormatter:function(t,e){if("scope"==e.property){var i=(t.structure_ids_info||[]).map(function(t){return t.name}).join("、");return i&&(i+="、"),i+(t.user_ids_info||[]).map(function(t){return t.realname}).join("、")||"全公司"}return"is_deal"==e.property?1==t.is_deal?"是":"否":t[e.property]},handleEdit:function(t){this.action={type:"update",data:t},this.showAddEdit=!0},addRule:function(){this.action={type:"save"},this.showAddEdit=!0},handleDelete:function(t){var e=this;this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.loading=!0,Object(s.l)({id:t.row.id}).then(function(i){e.list.splice(t.$index,1),e.$message.success("删除成功"),e.loading=!1}).catch(function(){e.loading=!1})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})}}},A=(i("JsGK"),Object(a.a)(S,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"content-title"},[i("span",[t._v(t._s(t.title))]),t._v(" "),i("el-button",{staticClass:"rt",attrs:{type:"primary",size:"medium"},on:{click:t.addRule}},[t._v("添加规则")])],1),t._v(" "),i("div",{staticClass:"customer-table"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.list,height:t.tableHeight,"header-cell-style":t.headerCellStyle,stripe:""}},[t._l(t.fieldList,function(e,s){return i("el-table-column",{key:s,attrs:{prop:e.field,label:e.label,formatter:t.fieldFormatter,"show-overflow-tooltip":""}})}),t._v(" "),i("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){t.handleEdit(e.row)}}},[t._v("编 辑")]),t._v(" "),i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){t.handleDelete(e)}}},[t._v("删 除")])]}}])})],2),t._v(" "),i("div",{staticClass:"p-contianer"},[i("el-pagination",{staticClass:"p-bar",attrs:{"current-page":t.currentPage,"page-sizes":t.pageSizes,"page-size":t.pageSize,total:t.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"update:pageSize":function(e){t.pageSize=e},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1),t._v(" "),i("edit-customer-limit",{attrs:{visible:t.showAddEdit,types:t.types,action:t.action},on:{"update:visible":function(e){t.showAddEdit=e},success:t.getList}})],1)},[],!1,null,"2b3ca6b6",null));A.options.__file="customerLimitSet.vue";var x={name:"BizParam",components:{BusinessGroupSet:b,ProductCategorySet:_,FollowLogTypeSet:l,ContractExpireSet:I,CustomerLimitSet:A.exports},data:function(){return{menuList:[{label:"跟进记录类型设置",key:"follow-log-type-set"},{label:"商机组设置",key:"business-group-set"},{label:"产品类别设置",key:"product-category-set"},{label:"合同到期提醒设置",key:"contract-expire-set"},{label:"拥有客户数限制",key:"own"},{label:"锁定客户数限制",key:"lock"}],menuIndex:"follow-log-type-set",types:""}},methods:{menuSelect:function(t,e){"own"==t||"lock"==t?(this.types={own:1,lock:2}[t],this.menuIndex="customer-limit-set"):this.menuIndex=t}}},k=(i("B6tz"),Object(a.a)(x,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"system-customer"},[i("div",{staticClass:"title"},[t._v("业务参数设置")]),t._v(" "),i("div",{staticClass:"customer-content"},[i("div",{staticClass:"system-view-nav"},[i("el-menu",{attrs:{"default-active":"follow-log-type-set"},on:{select:t.menuSelect}},t._l(t.menuList,function(e,s){return i("el-menu-item",{key:s,attrs:{index:e.key}},[i("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.label))])])}))],1),t._v(" "),i("keep-alive",[i(t.menuIndex,{tag:"component",staticClass:"system-view-content",attrs:{types:t.types}})],1)],1)])},[],!1,null,"12a1b009",null));k.options.__file="index.vue";e.default=k.exports},JsGK:function(t,e,i){"use strict";var s=i("38eC");i.n(s).a},Qvkk:function(t,e,i){},dl6e:function(t,e,i){"use strict";var s=i("eR8u");i.n(s).a},eR8u:function(t,e,i){},tb0o:function(t,e,i){"use strict";var s=i("BDeq");i.n(s).a},xerP:function(t,e,i){},zXZL:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAYAAAA7bUf6AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjVENzhCOEIzRERCMjExRTg4QjUxREJEMjVGMDBFOUEyIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjVENzhCOEI0RERCMjExRTg4QjUxREJEMjVGMDBFOUEyIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NUQ3OEI4QjFEREIyMTFFODhCNTFEQkQyNUYwMEU5QTIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NUQ3OEI4QjJEREIyMTFFODhCNTFEQkQyNUYwMEU5QTIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5zKmg/AAAAcElEQVR42mI8c+aMLQMDw0IgVmQgHdwH4jgmIDEHiNOBmJEMDNI3lxHokv9QAXLBfyYGKgBiDPlPDUMYho4hLESGAboYIyFDGLEYwDiCApYYQxjp5pJbQOxCpn6QvlugKE4B4kVArECGIQ+AOBYgwAB2pxPdB9NdPQAAAABJRU5ErkJggg=="},zkFX:function(t,e,i){}}]);