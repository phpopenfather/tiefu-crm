(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-5880","chunk-68d7","chunk-68d76","chunk-68d763","chunk-623a"],{"+Gvz":function(t,e,a){"use strict";a.r(e);var s=a("FyfS"),i=a.n(s),n=a("QbLZ"),o=a.n(n),l=a("Xjjk"),c=a.n(l),r=a("+9th"),d=a("KTTK"),u=a("utuE"),m={data:function(){return{colorList:["#53D397","#20C1BD","#58DADA","#0FC9E7","#3498DB","#4586FF","#8983F3","#AEA1EA","#FF6699","#F24D70","#FF6F6F"],input:this.newTagInput,showBgColor:""}},watch:{bgColorProps:function(t){this.showBgColor=t||"#53D397"}},props:{newTagTitle:String,newTagInput:String,bgColorProps:String},mounted:function(){this.showBgColor=this.bgColorProps||"#53D397"},methods:{back:function(){this.$emit("back")},close:function(){this.$emit("close")},changeColor:function(t){this.$emit("changeColor",t)},tagCreateSubmit:function(){this.$emit("tagCreateSubmit",this.input,this.showBgColor)},tagCancel:function(){this.$emit("tagCancel")}}},h=(a("fGWj"),a("KHd+")),p=Object(h.a)(m,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"new-tag-dialog"},[a("div",{staticClass:"title"},[a("span",{staticClass:"el-icon-arrow-left",on:{click:t.back}}),t._v(" "),a("span",[t._v(t._s(t.newTagTitle))]),t._v(" "),a("span",{staticClass:"el-icon-close rt",on:{click:t.close}})]),t._v(" "),a("div",{staticClass:"search"},[a("el-input",{attrs:{size:"mini",maxlength:10,placeholder:"输入标签名，最多十个字符"},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}}),t._v(" "),a("span",{staticClass:"checked-color",style:{background:t.showBgColor}})],1),t._v(" "),a("div",{staticClass:"color-box"},t._l(t.colorList,function(e,s){return a("span",{key:s,style:{background:e},on:{click:function(a){t.changeColor(e)}}})})),t._v(" "),a("div",{staticClass:"footer"},[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.tagCreateSubmit}},[t._v("保存")]),t._v(" "),a("el-button",{attrs:{size:"medium"},on:{click:t.tagCancel}},[t._v("取消")])],1)])},[],!1,null,"27c006e2",null);p.options.__file="newTag.vue";var v=p.exports,g={data:function(){return{inputModel:"",list:this.editTagList}},props:{editTagList:Array},watch:{inputModel:function(t){this.list=this.editTagList.filter(function(e){return e.name.indexOf(t)>-1})}},methods:{back:function(){this.$emit("back")},close:function(){this.$emit("close")},deleteBtn:function(t){this.$emit("deleteBtn",t)},editBtn:function(t){this.$emit("editBtn",t)}}},b=(a("6K8m"),Object(h.a)(g,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"edit-tag-dialog"},[a("div",{staticClass:"title"},[a("span",{staticClass:"el-icon-arrow-left",on:{click:t.back}}),t._v(" "),a("span",[t._v("标签管理")]),t._v(" "),a("span",{staticClass:"el-icon-close rt",on:{click:t.close}})]),t._v(" "),a("div",{staticClass:"search"},[a("el-input",{attrs:{size:"mini",maxlength:10,placeholder:"输入标签名，最多十个字符"},model:{value:t.inputModel,callback:function(e){t.inputModel=e},expression:"inputModel"}})],1),t._v(" "),a("div",{staticClass:"content"},t._l(t.list,function(e,s){return a("div",{key:s,staticClass:"tag-list"},[a("span",{staticClass:"tag-name",style:{background:e.color?e.color:"#ccc"}},[t._v("\n        "+t._s(e.name.length>10?e.name.substring(0,10)+"...":e.name)+"\n      ")]),t._v(" "),a("div",{staticClass:"rt"},[a("span",{staticClass:"el-icon-edit",on:{click:function(a){t.editBtn(e)}}}),t._v(" "),a("span",{staticClass:"el-icon-delete",on:{click:function(a){t.deleteBtn(e)}}})])])}))])},[],!1,null,"eb99fe04",null));b.options.__file="editTag.vue";var k={components:{newTag:v,editTag:b.exports},data:function(){return{tagShow:!1,tagContent:0,tagInputChange:"",particularsTagList:[],newTagTitle:"",newTagInput:"",bgColorProps:"",editTagId:"",popoverWidth:"220"}},mounted:function(){this.tagListFun()},props:{taskData:{type:Object,default:function(){return{}}},placement:String},watch:{tagInputChange:function(t){this.particularsTagList=this.particularsTagListCopy.filter(function(e){return e.name.indexOf(t)>-1})}},methods:{createTagFun:function(){this.newTagTitle="创建新标签",this.newTagInput="",this.tagContent=1,this.popoverWidth="330"},editBtn:function(t){this.editTagId=t.lable_id,this.newTagTitle="编辑标签",this.tagContent=3,this.bgColorProps=t.color,this.newTagInput=t.name},managementTag:function(){this.popoverWidth="400",this.tagContent=2},tagBtn:function(t,e){var a=this;for(var s in t.check?Object(r.f)({task_id:this.taskData.task_id,lable_id_del:t.lable_id,type:"lable_id_del"}).then(function(e){var s=a.taskData.lable_list;for(var i in s)if(t.lable_id==s[i].lable_id){s.splice(i,1);break}t.check=!1}):Object(r.f)({task_id:this.taskData.task_id,lable_id_add:t.lable_id,type:"lable_id_add"}).then(function(e){t.check=!0,a.taskData.lable_list.push(t)}),e)e[s].lable_id==t.lable_id?document.getElementsByClassName("tag-list")[s].style.background="#F7F8FA":document.getElementsByClassName("tag-list")[s].style.background="#FFF"},changeColor:function(t){this.bgColorProps=t},tagClose:function(){this.tagShow=!1},tagCreateSubmit:function(t,e){var a=this,s=this;"创建新标签"==this.newTagTitle?Object(r.d)({name:t,color:e}).then(function(t){a.tagClose(),a.tagListFun(),a.$message.success("创建成功")}):Object(r.k)({name:t,lable_id:this.editTagId,color:e}).then(function(n){var o=!0,l=!1,c=void 0;try{for(var r,d=i()(s.editTagList);!(o=(r=d.next()).done);o=!0){var u=r.value;u.lable_id==s.editTagId&&(u.name=t,u.color=e)}}catch(t){l=!0,c=t}finally{try{!o&&d.return&&d.return()}finally{if(l)throw c}}a.tagContent=2})},tagCancel:function(){"创建新标签"==this.newTagTitle?(this.tagClose(),this.$message.info("已取消创建")):this.tagContent=2},back:function(){"创建新标签"==this.newTagTitle?(this.tagContent=0,this.popoverWidth="220"):"编辑标签"==this.newTagTitle&&3==this.tagContent?this.tagContent=2:2==this.tagContent&&(this.tagContent=0,this.popoverWidth="220")},deleteBtn:function(t){var e=this;this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",customClass:"is-particulars"}).then(function(){e.tagShow=!0,e.managementTag(),Object(r.g)({lable_id:t.lable_id}).then(function(a){for(var s in e.editTagList)e.editTagList[s].lable_id==t.lable_id&&e.editTagList.splice(s,1);e.$message({type:"success",message:"删除成功!"})})}).catch(function(){e.$message({type:"info",message:"已取消删除"}),e.tagShow=!0,e.managementTag()})},tagListFun:function(){var t=this;Object(r.q)().then(function(e){var a=!0,s=!1,n=void 0;try{for(var o,l=i()(e.data.list);!(a=(o=l.next()).done);a=!0){var c=o.value;if(t.taskData.lable_list){var r=!0,d=!1,u=void 0;try{for(var m,h=i()(t.taskData.lable_list);!(r=(m=h.next()).done);r=!0){if(m.value.lable_id==c.lable_id){c.check=!0;break}c.check=!1}}catch(t){d=!0,u=t}finally{try{!r&&h.return&&h.return()}finally{if(d)throw u}}}}}catch(t){s=!0,n=t}finally{try{!a&&l.return&&l.return()}finally{if(s)throw n}}t.editTagList=e.data.list,t.particularsTagList=e.data.list,t.particularsTagListCopy=e.data.list})},referenceFun:function(){this.tagContent=0,this.tagListFun()}}},_=(a("op8A"),Object(h.a)(k,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"edit-index"},[a("el-popover",{attrs:{placement:t.placement,width:t.popoverWidth,trigger:"click"},model:{value:t.tagShow,callback:function(e){t.tagShow=e},expression:"tagShow"}},[0==t.tagContent?a("div",{staticClass:"tag-popover-box"},[a("div",{staticClass:"tag-top"},[a("span",[t._v("选择标签")]),t._v(" "),a("span",{staticClass:"el-icon-close rt cursor-pointer",on:{click:function(e){t.tagShow=!1}}})]),t._v(" "),a("el-input",{attrs:{placeholder:"搜索标签","prefix-icon":"el-icon-search",size:"small"},model:{value:t.tagInputChange,callback:function(e){t.tagInputChange=e},expression:"tagInputChange"}}),t._v(" "),a("div",{staticClass:"tag-content"},t._l(t.particularsTagList,function(e,s){return a("div",{key:s,staticClass:"tag-list",on:{click:function(a){t.tagBtn(e,t.particularsTagList)}}},[a("i",{staticClass:"wukong wukong-black-label",style:{color:e.color}}),t._v(" "),a("span",{staticClass:"item-label"},[t._v(t._s(e.name))]),t._v(" "),e.check?a("span",{staticClass:"el-icon-check rt"}):t._e()])})),t._v(" "),a("div",{staticClass:"tag-footer"},[a("p",{staticClass:"footer-row cursor-pointer",on:{click:t.createTagFun}},[a("span",{staticClass:"el-icon-plus"}),t._v(" "),a("span",[t._v("创建新标签")])]),t._v(" "),a("p",{staticClass:"footer-row cursor-pointer",on:{click:t.managementTag}},[a("span",{staticClass:"el-icon-setting"}),t._v(" "),a("span",[t._v("标签管理")])])])],1):1==t.tagContent?a("new-tag",{attrs:{newTagTitle:t.newTagTitle,newTagInput:t.newTagInput,bgColorProps:t.bgColorProps},on:{changeColor:t.changeColor,close:t.tagClose,tagCreateSubmit:t.tagCreateSubmit,tagCancel:t.tagCancel,back:t.back}}):2==t.tagContent?a("editTag",{attrs:{editTagList:t.editTagList},on:{back:t.back,close:t.tagClose,editBtn:t.editBtn,deleteBtn:t.deleteBtn}}):3==t.tagContent?a("new-tag",{attrs:{newTagTitle:t.newTagTitle,newTagInput:t.newTagInput,bgColorProps:t.bgColorProps},on:{changeColor:t.changeColor,close:t.tagClose,tagCreateSubmit:t.tagCreateSubmit,tagCancel:t.tagCancel,back:t.back}}):t._e(),t._v(" "),a("span",{attrs:{slot:"reference"},on:{click:t.referenceFun},slot:"reference"},[t._t("editIndex")],2)],1)],1)},[],!1,null,"8a892ada",null));_.options.__file="tagIndex.vue";var f=_.exports,C=a("gDS+"),y=a.n(C),x=a("0hym"),D={components:{XhUser:x.a},data:function(){return{subtasksDate:"",xhUserData:[],subtasksDataText:null,subtaskChange:!1,num:0,subtasksTextarea:"",isNum:0}},created:function(){"edit"==this.subTaskCom&&(this.subtasksTextarea=this.text?this.text:"",this.subtasksDataText=this.time,"{}"!==y()(this.subData)?this.subData.main_user_id&&(this.subData.id=this.subData.main_user_id,this.subtaskChange=!0,this.xhUserData=[this.subData]):(this.xhUserData=[],this.subtaskChange=!1))},props:{taskData:{type:Object,default:function(){return{}}},text:String,time:[String,Number],subData:Object,subTaskCom:{type:String,default:""},taskId:[Number,String],checkboxData:{type:Boolean,default:!1}},watch:{},methods:{subtasksDateClick:function(t){this.subtasksDataText=t.substring(5)},subtasksSubmit:function(t){var e=this;if(this.subtasksTextarea=this.subtasksTextarea.split(/[\n]/).join(""),this.subtasksTextarea&&0==this.num){if(this.num=1,"new"==this.subTaskCom){var a=this.subtasksDate?new Date(this.subtasksDate).getTime()/1e3:"";this.$emit("on-handle",{type:"add",result:"success"}),Object(r.a)({pid:this.taskData.task_id,name:this.subtasksTextarea,stop_time:a,main_user_id:0!=this.xhUserData.length?this.xhUserData[0].id:""}).then(function(t){e.taskData.subTaskList.push({name:e.subtasksTextarea,stop_time:a,task_id:t.data,thumb_img:e.xhUserData.length>0?e.xhUserData[0].thumb_img:"",main_user_id:e.xhUserData.length>0?e.xhUserData[0].id:"",realname:e.xhUserData.length>0?e.xhUserData[0].realname:""}),e.$message.success("子任务创建成功"),e.subtasksTextarea="",e.subtasksDataText=null,e.subtaskChange=!1,e.num=0}).catch(function(t){e.$emit("on-handle",{type:"add",result:"error"}),e.$message.error("子任务创建失败"),e.num=0})}else if("edit"==this.subTaskCom){var s=this.xhUserData.length>0?this.xhUserData[0].id:"";if(1==this.isNum||this.text!=this.subtasksTextarea||this.subtasksDataText!=this.time){var i=this.subtasksDate?new Date(this.subtasksDate).getTime()/1e3:this.time;this.$emit("on-handle",{type:"edit",result:"success"}),Object(r.l)({task_id:this.taskId,stop_time:i||"",main_user_id:s,name:this.subtasksTextarea}).then(function(t){var a=e.taskData.subTaskList;for(var s in a)if(a[s].task_id==e.taskId){var n=a[s];n.name=e.subtasksTextarea,n.stop_time=i||"",n.thumb_img=e.xhUserData.length>0?e.xhUserData[0].thumb_img:"",n.main_user_id=e.xhUserData.length>0?e.xhUserData[0].id:"",n.realname=e.xhUserData.length>0?e.xhUserData[0].realname:"",a.splice(s,1,n);break}e.num=0,e.$message.success("子任务编辑成功")}).catch(function(t){e.$emit("on-handle",{type:"edit",result:"error"}),e.$message.error("子任务编辑失败"),e.num=0})}else this.$emit("on-handle",{type:"cancel"})}}else this.$emit("on-handle",{type:"cancel"})},xhUserCheckout:function(t){0!=t.data.length?(this.subtaskChange=!0,0!=this.xhUserData.length?(this.$set(this.xhUserData[0],"thumb_img",t.data[0].thumb_img),this.$set(this.xhUserData[0],"realname",t.data[0].realname)):this.xhUserData=t.data,this.isNum=1):(this.isNum=0,this.subtaskChange=!1)},subtasksDateFun:function(){this.$refs.subtasksDate.change()}}},w=(a("D3Aa"),Object(h.a)(D,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"task-sub"},[a("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:t.subtasksSubmit,expression:"subtasksSubmit"}],staticClass:"subtasks-content"},[a("div",{staticClass:"checkbox-box subtasks-box"},[a("el-checkbox",{attrs:{disabled:""},model:{value:t.checkboxData,callback:function(e){t.checkboxData=e},expression:"checkboxData"}})],1),t._v(" "),a("div",{staticClass:"subtasks-content-box"},[a("el-input",{attrs:{type:"textarea",autosize:"",maxlength:50,placeholder:"请输入内容"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.subtasksSubmit(e):null}},model:{value:t.subtasksTextarea,callback:function(e){t.subtasksTextarea=e},expression:"subtasksTextarea"}})],1),t._v(" "),a("flexbox",{staticClass:"subtasks-content-png"},[a("div",{staticClass:"time"},[a("el-date-picker",{ref:"subtasksDate",style:{width:t.subtasksDataText?"54px":"28px"},attrs:{type:"date",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd",placeholder:"选择日期"},on:{change:function(e){t.subtasksDateClick(t.subtasksDate)}},model:{value:t.subtasksDate,callback:function(e){t.subtasksDate=e},expression:"subtasksDate"}}),t._v(" "),t.subtasksDataText&&0!=t.subtasksDataText?a("span",{staticClass:"bg-color"},[t._v(t._s(t._f("moment")(t.subtasksDataText,"MM-DD")))]):a("i",{staticClass:"wukong wukong-time-task",on:{click:t.subtasksDateFun}})],1),t._v(" "),a("el-popover",{attrs:{placement:"bottom-end",width:"280",trigger:"click"}},[a("xh-user",{ref:"xhuser",attrs:{radio:"",selectedData:t.xhUserData},on:{changeCheckout:t.xhUserCheckout}}),t._v(" "),a("div",{staticClass:"select-box",attrs:{slot:"reference"},slot:"reference"},[t.subtaskChange?t._l(t.xhUserData,function(e,s){return a("span",{key:s},[a("el-tooltip",{attrs:{placement:"bottom",effect:"light","popper-class":"tooltip-change-border"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("span",[t._v(t._s(e.realname))])]),t._v(" "),a("div",{directives:[{name:"photo",rawName:"v-photo",value:e,expression:"item"},{name:"lazy",rawName:"v-lazy:background-image",value:t.$options.filters.filterUserLazyImg(e.thumb_img),expression:"$options.filters.filterUserLazyImg(item.thumb_img)",arg:"background-image"}],key:e.thumb_img,staticClass:"div-photo"})])],1)}):a("i",{staticClass:"wukong wukong-user"})],2)],1)],1)],1)])},[],!1,null,"3e6de04e",null));w.options.__file="subTask.vue";var T=w.exports,I=a("S3Kq"),L=a("1RnH"),M=a("O1Uw"),S=a("uMjE"),A=a("L2JU"),j=a("7Qib"),E={components:{membersDep:u.a,emoji:I.a,relatedBusiness:L.a,XhUser:x.a,tagIndex:f,CRMFullScreenDetail:S.default,subTask:T,FileCell:M.a},data:function(){return{zIndex:Object(j.g)(),commentsActivities:!0,commentsTextarea:"",childCommentsTextarea:"",replyChildComment:null,replyChildIndex:-1,contentLoading:!1,commentsPopover:!1,childCommentsPopover:!1,priorityVisible:!1,particularsList:[{id:3,label:"高",color:"#ED6363"},{id:2,label:"中",color:"#FF9668"},{id:1,label:"低",color:"#8bb5f0"},{id:0,label:"无",color:"#ccc"}],addSubtasks:!0,nameVinput:!1,taskDataName:"",addDescriptionShow:!1,addDescriptionTextarea:"",subTaskProgress:0,blurIndex:0,addComments:!1,allData:{},isComment:!0,commentsLoading:!1,relatedID:"",relatedCRMType:"",showRelatedDetail:!1,subTaskID:null,loading:!1,taskData:null,activityList:[],fileList:[]}},props:{id:[String,Number],detailIndex:Number,appendToBody:{type:Boolean,default:!1}},computed:o()({},Object(A.b)(["userInfo"])),watch:{id:function(t){this.initInfo(),this.getDetail(),this.getFileList(),this.getActivityList()}},mounted:function(){this.appendToBody&&document.body.appendChild(this.$el),this.id&&(this.getDetail(),this.getFileList(),this.getActivityList())},methods:{initInfo:function(){this.taskData=null,this.subTaskProgress=0,this.allData={business:[],contacts:[],contract:[],customer:[]},this.taskData=null,this.activityList=[],this.fileList=[]},getDetail:function(){var t=this;this.loading=!0,Object(r.j)({task_id:this.id}).then(function(e){var a=e.data;if(a.stop_time=Object(j.m)(a.stop_time,"YYYY-MM-DD"),a.checked=5==a.status,a.subTaskList){var s=!0,n=!1,o=void 0;try{for(var l,c=i()(a.subTaskList);!(s=(l=c.next()).done);s=!0){var r=l.value;5==r.status?(r.checked=!0,t.subTaskProgress++):r.checked=!1}}catch(t){n=!0,o=t}finally{try{!s&&c.return&&c.return()}finally{if(n)throw o}}}t.allData={business:a.businessList||[],contacts:a.contactsList||[],contract:a.contractList||[],customer:a.customerList||[]},t.taskData=a,t.loading=!1}).catch(function(e){t.loading=!1,t.closeBtn()})},getActivityList:function(){var t=this;Object(r.o)({task_id:this.id}).then(function(e){t.activityList=e.data}).catch(function(){})},getFileList:function(){var t=this;Object(d.d)({module:"work_task",module_id:this.id}).then(function(e){t.fileList=e.data.list}).catch(function(){})},titleCheckbox:function(t){var e=this;this.taskData.checked=t,Object(r.r)({task_id:this.id,type:this.taskData.checked?1:2}).then(function(a){e.$emit("on-handle",{type:"title-check",value:t,index:e.detailIndex}),e.$store.dispatch("GetOAMessageNum","task")}).catch(function(t){e.$emit("on-handle",{type:"title-check",value:!e.taskData.checked,index:e.detailIndex}),e.taskData.checked=!e.taskData.checked})},closeBtn:function(){this.$emit("close")},footerTitle:function(t){switch(t){case 0:this.commentsActivities=!0,this.isComment=!0;break;case 1:this.commentsActivities=!1,this.isComment=!1}},priorityBtn:function(t,e){var a=this;this.taskData.priority=t.id,Object(r.t)({task_id:this.id,priority_id:t.id}).then(function(e){a.$emit("on-handle",{type:"change-priority",value:t,index:a.detailIndex}),a.priorityVisible=!1}).catch(function(t){a.$message.error("编辑失败"),a.taskData.priority=e})},moreDelete:function(){var t=this;this.$confirm("此操作将永久删除该任务, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",customClass:"is-particulars"}).then(function(){Object(r.h)({task_id:t.id}).then(function(e){t.$message.success("删除成功"),t.$emit("on-handle",{type:"delete",index:t.detailIndex}),t.$emit("close")}).catch(function(){})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},httpRequest:function(t){var e=this;Object(d.e)({"file[]":t.file,module:"work_task",module_id:this.id}).then(function(t){e.getFileList(),e.$message.success("上传成功")}).catch(function(){})},accessoryDeleteFun:function(t,e){this.fileList.splice(t,1)},addSubtasksBtn:function(){this.addSubtasks=!this.addSubtasks},subtasksCheckbox:function(t,e){var a=this;e?(this.$set(t,"checked",!0),this.subTaskProgress++):(this.$set(t,"checked",!1),this.subTaskProgress--),this.$emit("on-handle",{type:"change-sub-task",value:{subdonecount:this.subTaskProgress,allcount:this.taskData.subTaskList.length},index:this.detailIndex}),Object(r.r)({task_id:t.task_id,type:e?1:2}).then(function(t){}).catch(function(s){a.$message.error("子任务标记失败"),e?(a.$set(t,"checked",!1),a.subTaskProgress--):(a.$set(t,"checked",!0),a.subTaskProgress++),a.$emit("on-handle",{type:"change-sub-task",value:{subdonecount:a.subTaskProgress,allcount:a.taskData.subTaskList.length},index:a.detailIndex})})},editOwnerList:function(t,e){var a=this;this.taskData.owner_list=[],Object(r.s)({task_id:this.id,owner_userids:t.map(function(t){return t.id})}).then(function(e){a.taskData.owner_list=t}).catch(function(){})},deleteOwnerList:function(t,e){var a=this;Object(r.e)({task_id:this.id,type:"owner_userid_del",owner_userid_del:t.id}).then(function(t){a.taskData.owner_list.splice(e,1)}).catch(function(){})},editMainUser:function(t){var e=this;Object(r.l)({task_id:this.id,main_user_id:t?t.data[0].id:"",type:"main_user_id"}).then(function(a){t?(e.$set(e.taskData,"main_user_name",t.data[0].realname),e.$set(e.taskData,"main_user_img",t.data[0].thumb_img)):(e.$set(e.taskData,"main_user_name",""),e.$set(e.taskData,"main_user_img",""))}).catch(function(){})},nameVShow:function(t){var e=this;Object(r.m)({name:t,type:"name",task_id:this.id}).then(function(a){e.nameVinput=!1,e.$emit("on-handle",{type:"change-name",value:t,index:e.detailIndex}),e.taskData.name=t}).catch(function(){})},endTimeChange:function(t){var e=this;Object(r.u)({stop_time:new Date(t).getTime()/1e3,type:"stop_time",task_id:this.id}).then(function(a){e.$emit("on-handle",{type:"change-stop-time",value:new Date(t).getTime()/1e3,index:e.detailIndex})}).catch(function(){})},addDescriptionSubmit:function(){var t=this;Object(r.l)({task_id:this.id,description:this.addDescriptionTextarea}).then(function(e){t.addDescriptionShow=!1,t.$set(t.taskData,"description",t.addDescriptionTextarea)}).catch(function(){})},selectEmoji:function(t){var e=this.commentsTextarea.split("");e.splice(this.blurIndex,0,t),this.commentsTextarea=e.join(""),this.commentsPopover=!1},selectEmojiChild:function(t){var e=this.childCommentsTextarea.split("");e.splice(this.blurIndex,0,t),this.childCommentsTextarea=e.join(""),this.childCommentsPopover=!1},commentsSub:function(){var t=this;this.commentsTextarea&&(this.commentsLoading=!0,Object(r.b)({task_id:this.id,content:c()(this.commentsTextarea)}).then(function(e){t.taskData.replyList.push({comment_id:e.data,type_id:t.id,userInfo:t.userInfo,create_time:parseInt((new Date).getTime()/1e3),content:c()(t.commentsTextarea),replyList:[],show:!1}),t.commentsTextarea="",t.$emit("on-handle",{type:"change-comments",value:"add",index:t.detailIndex}),t.commentsLoading=!1}).catch(function(e){t.commentsLoading=!1}))},childCommentSubmit:function(){var t=this;if(this.replyChildComment&&this.childCommentsTextarea){var e=-1==this.replyChildIndex?this.replyChildComment:this.replyChildComment.replyList[this.replyChildIndex];Object(r.b)({reply_fid:this.replyChildComment.comment_id,task_id:e.type_id,content:c()(this.childCommentsTextarea),reply_content:e.content,reply_comment_id:e.comment_id,reply_user_id:e.userInfo.id,reply_name:e.userInfo.realname}).then(function(a){t.childCommentsPopover=!1,t.replyChildComment.replyList.push({comment_id:a.data,type_id:e.type_id,userInfo:t.userInfo,create_time:parseInt((new Date).getTime()/1e3),content:c()(t.childCommentsTextarea),reply_content:e.content,replyuserInfo:e.userInfo}),t.replyChildComment.show=!1,t.replyChildComment=null,t.childCommentsTextarea="",t.$emit("on-handle",{type:"change-comments",value:"add",index:t.detailIndex})}).catch(function(){})}},discussDelete:function(t,e,a){var s=this;this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",customClass:"is-particulars"}).then(function(){Object(r.c)({comment_id:t.comment_id,task_id:t.type_id}).then(function(t){e.splice(a,1),s.$emit("on-handle",{type:"change-comments",value:"delete",index:s.detailIndex})}).catch(function(){})}).catch(function(){s.$message({type:"info",message:"已取消删除"})})},discussBtn:function(t,e){t.show?(this.$set(t,"show",!1),this.replyChildComment=null):(this.$set(t,"show",!0),this.$set(t,"showComment",!1),this.replyChildComment=t,this.replyChildIndex=e)},blurFun:function(t){this.blurIndex=t.target.selectionEnd},checkInfos:function(t){var e=this;Object(r.l)({task_id:this.id,customer_ids:t.customer_ids,contacts_ids:t.contacts_ids,business_ids:t.business_ids,contract_ids:t.contract_ids}).then(function(t){e.$message.success("关联成功")}).catch(function(){})},commentsSubmit:function(t){this.addComments=!1},checkRelatedDetail:function(t,e){this.relatedID=e.key,this.relatedCRMType=t,this.showRelatedDetail=!0},deleteSubTask:function(t){var e=this;this.$confirm("此操作将永久删除该任务, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",customClass:"is-particulars"}).then(function(){Object(r.h)({task_id:t.task_id}).then(function(a){var s=e.taskData.subTaskList;for(var i in s)if(s[i].task_id==t.task_id){s.splice(i,1);break}t.checked&&(e.subTaskProgress--,e.$emit("on-handle",{type:"change-sub-task",value:{subdonecount:e.subTaskProgress,allcount:e.taskData.subTaskList.length},index:e.detailIndex})),e.$message.success("子任务删除成功")}).catch(function(t){e.$message.error("子任务删除失败")})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},editSubTask:function(t){this.subTaskID=t.task_id;var e=this.taskData.subTaskList;for(var a in e)e[a].task_id==t.task_id?this.$set(e[a],"showEdit",!0):this.$set(e[a],"showEdit",!1)},handleSubTasksBlock:function(t,e){"edit"==t.type?this.$set(e,"showEdit",!1):"add"==t.type?(this.addSubtasks=!0,"success"==t.result?this.$emit("on-handle",{type:"change-sub-task",value:{subdonecount:this.subTaskProgress,allcount:this.taskData.subTaskList.length+1},index:this.detailIndex}):this.$emit("on-handle",{type:"change-sub-task",value:{subdonecount:this.subTaskProgress,allcount:this.taskData.subTaskList.length-1},index:this.detailIndex})):"cancel"==t.type&&(e?this.$set(e,"showEdit",!1):this.addSubtasks=!0)},deleteTimeTop:function(){var t=this;Object(r.l)({task_id:this.id,stop_time:""}).then(function(e){t.$set(t.taskData,"stop_time","")}).catch(function(){})}},beforeDestroy:function(){this.appendToBody&&this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)}},N=(a("LuGD"),Object(h.a)(E,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"slide-fade"}},[s("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"particulars-common",style:{"z-index":t.zIndex}},[t.taskData?s("div",{staticClass:"clear-fix",attrs:{slot:"header"},slot:"header"},[s("div",{staticClass:"img-box-grop"},[s("div",[s("el-popover",{attrs:{placement:"bottom-start",width:"200",trigger:"click"},model:{value:t.priorityVisible,callback:function(e){t.priorityVisible=e},expression:"priorityVisible"}},[s("div",{staticClass:"particulars-priority-box"},t._l(t.particularsList,function(e,a){return s("p",{key:a,on:{click:function(a){t.priorityBtn(e,t.taskData.priority)}}},[s("span",{style:{"border-color":e.color,background:e.id==t.taskData.priority?e.color:"transparent",color:e.id==t.taskData.priority?"#fff":e.color}},[t._v(t._s(e.label))])])})),t._v(" "),s("span",{attrs:{slot:"reference"},slot:"reference"},[s("i",{staticClass:"wukong wukong-lightning"}),t._v(" "),s("span",[t._v("优先级")])])])],1),t._v(" "),s("div",[s("tag-index",{attrs:{placement:"bottom",taskData:t.taskData}},[s("div",{attrs:{slot:"editIndex"},slot:"editIndex"},[s("i",{staticClass:"wukong wukong-label"}),t._v(" "),s("span",[t._v("标签")])])])],1),t._v(" "),0==t.taskData.pid?s("div",{on:{click:t.addSubtasksBtn}},[s("i",{staticClass:"wukong wukong-sub-task"}),t._v(" "),s("span",[t._v("子任务")])]):t._e(),t._v(" "),s("div",[s("el-upload",{staticClass:"upload-demo",attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"","http-request":t.httpRequest,"list-type":"picture"}},[s("i",{staticClass:"wukong wukong-file"}),t._v(" "),s("span",[t._v("附件")])])],1),t._v(" "),s("div",[s("el-popover",{attrs:{placement:"bottom",width:"80",trigger:"click"}},[s("div",{staticClass:"more-btn-group"},[s("p",{on:{click:t.moreDelete}},[t._v("删 除")])]),t._v(" "),s("span",{attrs:{slot:"reference"},slot:"reference"},[s("img",{attrs:{src:a("DcnZ")}})])])],1),t._v(" "),s("div",{staticClass:"task-close-img"},[s("img",{attrs:{src:a("cjwK")},on:{click:t.closeBtn}})])])]):t._e(),t._v(" "),t.taskData?s("div",{staticClass:"body-content"},[t._t("extraContent"),t._v(" "),s("div",{staticClass:"card-content-box"},[s("el-checkbox",{on:{change:t.titleCheckbox},model:{value:t.taskData.checked,callback:function(e){t.$set(t.taskData,"checked",e)},expression:"taskData.checked"}}),t._v(" "),s("div",{staticClass:"card-content"},[s("div",{staticClass:"card-content-row margin-bottom-15"},[s("div",{staticClass:"priority-data-name"},[s("div",{directives:[{name:"show",rawName:"v-show",value:!t.nameVinput,expression:"!nameVinput"}],staticClass:"title-text",style:{"text-decoration":t.taskData.checked?"line-through":"none"}},[t._v("\n                "+t._s(t.taskData.name)+"\n                "),s("span",{staticClass:"el-icon-edit-outline",on:{click:function(e){t.nameVinput=!0,t.taskDataName=t.taskData.name}}})]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.nameVinput,expression:"nameVinput"}],staticClass:"show-input"},[s("el-input",{attrs:{maxlength:50,size:"medium"},model:{value:t.taskDataName,callback:function(e){t.taskDataName=e},expression:"taskDataName"}}),t._v(" "),s("div",{staticClass:"btn-box"},[s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.nameVShow(t.taskDataName)}}},[t._v("保 存")]),t._v(" "),s("el-button",{attrs:{size:"mini"},on:{click:function(e){t.nameVinput=!1}}},[t._v("取 消")])],1)],1)]),t._v(" "),s("div",{staticClass:"card-row-right"},[s("flexbox",{staticClass:"text-right"},[s("div",{staticClass:"color-label user-name-label"},[t._v(" 负责人： ")]),t._v(" "),t.taskData.main_user_name?s("div",{staticClass:"bg-position"},[s("el-tooltip",{attrs:{placement:"bottom",effect:"light","popper-class":"tooltip-change-border"}},[s("div",{attrs:{slot:"content"},slot:"content"},[s("span",[t._v(t._s(t.taskData.main_user_name))])]),t._v(" "),s("div",{directives:[{name:"photo",rawName:"v-photo",value:{thumb_img:t.taskData.main_user_img,realname:t.taskData.main_user_name},expression:"{thumb_img: taskData.main_user_img, realname: taskData.main_user_name}"},{name:"lazy",rawName:"v-lazy:background-image",value:t.$options.filters.filterUserLazyImg(t.taskData.main_user_img),expression:"$options.filters.filterUserLazyImg(taskData.main_user_img)",arg:"background-image"}],key:t.taskData.main_user_img,staticClass:"div-photo main-user-name"})]),t._v(" "),s("img",{staticClass:"el-icon-close",attrs:{src:a("cEue"),alt:""},on:{click:function(e){t.editMainUser("")}}})],1):[s("el-popover",{attrs:{placement:"bottom",width:"280",trigger:"click"}},[s("xh-user",{ref:"xhuser",attrs:{radio:""},on:{changeCheckout:t.editMainUser}}),t._v(" "),s("i",{staticClass:"wukong wukong-addition-task",attrs:{slot:"reference"},slot:"reference"})],1)]],2)],1)]),t._v(" "),t.taskData.lable_list?s("div",{staticClass:"card-content-row  margin-bottom-25"},[s("div",{staticClass:"particulars-priority-copy"},[t._l(t.taskData.lable_list,function(e,a){return s("span",{key:a,staticClass:"item-color",style:{background:e.color?e.color:"#ccc"}},[t._v("\n                  "+t._s(e.name)+"\n                ")])}),t._v(" "),s("div",{staticClass:"add-tag"},[s("tag-index",{attrs:{placement:"right",taskData:t.taskData}},[s("div",{attrs:{slot:"editIndex"},slot:"editIndex"},[s("span",{staticClass:"el-icon-plus"}),t._v(" "),s("span",{staticClass:"label"},[t._v("添加标签")])])])],1)],2),t._v(" "),s("div",{staticClass:"card-row-right"},[s("div",{staticClass:"text-right"},[s("span",{staticClass:"color-label"},[t._v(" 截止日期： ")]),t._v(" "),s("div",{staticClass:"time-top"},[s("el-date-picker",{ref:"endTime",class:{"no-time-top":!t.taskData.stop_time},attrs:{type:"date",clearable:!1,format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",placeholder:""},on:{change:t.endTimeChange},model:{value:t.taskData.stop_time,callback:function(e){t.$set(t.taskData,"stop_time",e)},expression:"taskData.stop_time"}}),t._v(" "),t.taskData.stop_time?s("img",{staticClass:"el-icon-close time-top-close",attrs:{src:a("cEue"),alt:""},on:{click:function(e){e.stopPropagation(),t.deleteTimeTop(t.taskData.stop_time)}}}):t._e()],1)])])]):t._e(),t._v(" "),s("div",{staticClass:"add-description"},[s("div",{directives:[{name:"show",rawName:"v-show",value:!t.addDescriptionShow,expression:"!addDescriptionShow"}]},[t.taskData.description?s("div",{on:{click:function(e){t.addDescriptionShow=!0,t.addDescriptionTextarea=t.taskData.description}}},[t._v(t._s(t.taskData.description))]):s("div",{staticClass:"no-description"},[s("span",{staticClass:"color-label"},[t._v("暂无描述")]),t._v(" "),s("el-button",{attrs:{type:"text",icon:"el-icon-plus"},on:{click:function(e){t.addDescriptionShow=!0}}},[t._v("添加描述")])],1)]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.addDescriptionShow,expression:"addDescriptionShow"}]},[s("el-input",{attrs:{type:"textarea",autosize:{minRows:2},placeholder:"请输入内容"},model:{value:t.addDescriptionTextarea,callback:function(e){t.addDescriptionTextarea=e},expression:"addDescriptionTextarea"}}),t._v(" "),s("div",{staticClass:"btn-box"},[s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.addDescriptionSubmit}},[t._v("保 存")]),t._v(" "),s("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){t.addDescriptionShow=!1}}},[t._v("取 消")])],1)],1)]),t._v(" "),s("div",{staticClass:"card-content-row card-content-row-column"},[s("flexbox",[s("div",{staticClass:"color-label participant"},[s("i",{staticClass:"wukong wukong-user"}),t._v(" "),s("span",[t._v("参与人： ")])]),t._v(" "),t.taskData.owner_list?s("div",{staticClass:"participant-class"},t._l(t.taskData.owner_list,function(e,i){return s("span",{key:i,staticClass:"owner-list"},[s("el-tooltip",{attrs:{placement:"bottom",effect:"light","popper-class":"tooltip-change-border"}},[s("div",{attrs:{slot:"content"},slot:"content"},[s("span",[t._v(t._s(e.realname))])]),t._v(" "),s("div",{directives:[{name:"photo",rawName:"v-photo",value:e,expression:"item"},{name:"lazy",rawName:"v-lazy:background-image",value:t.$options.filters.filterUserLazyImg(e.thumb_img),expression:"$options.filters.filterUserLazyImg(item.thumb_img)",arg:"background-image"}],key:e.thumb_img,staticClass:"div-photo item-img"})]),t._v(" "),s("img",{staticClass:"el-icon-close",attrs:{src:a("cEue")},on:{click:function(a){t.deleteOwnerList(e,i)}}})],1)})):t._e(),t._v(" "),s("members-dep",{attrs:{closeDep:!0,contentBlock:!1,userCheckedData:t.taskData.owner_list},on:{popoverSubmit:t.editOwnerList}},[s("i",{staticClass:"wukong wukong-addition-task",attrs:{slot:"membersDep"},slot:"membersDep"})])],1)],1),t._v(" "),s("div",{staticClass:"card-content-row card-content-row-column margin-bottom-30"},[s("span",{staticClass:"color-label participant"},[s("i",{staticClass:"wukong wukong-relevance"}),t._v(" "),s("span",[t._v("关联业务")])]),t._v(" "),s("related-business",{attrs:{marginLeft:"0",isTask:!0,allData:t.allData,taskID:t.taskData.task_id},on:{checkRelatedDetail:t.checkRelatedDetail,checkInfos:t.checkInfos}})],1),t._v(" "),0==t.taskData.pid?s("div",{staticClass:"card-content-row card-content-row-column"},[s("div",{staticClass:"display-flex sub-task margin-bottom-7"},[s("span",{staticClass:"color-label participant"},[s("i",{staticClass:"wukong wukong-sub-task"}),t._v(" "),s("span",[t._v("子任务")])]),t._v(" "),0!=t.taskData.subTaskList.length?[s("span",{staticClass:"color-label sub-task-progress"},[t._v(" ("+t._s(t.subTaskProgress)+"/"+t._s(t.taskData.subTaskList.length)+") ")]),t._v(" "),s("el-progress",{attrs:{percentage:t.subTaskProgress/t.taskData.subTaskList.length*100,"stroke-width":10}})]:[s("span",{staticClass:"color-label sub-task-progress"},[t._v(" ("+t._s(t.subTaskProgress)+"/"+t._s(t.taskData.subTaskList.length)+") ")]),t._v(" "),s("el-progress",{attrs:{percentage:0}})]],2),t._v(" "),0!=t.taskData.subTaskList.length?t._l(t.taskData.subTaskList,function(e,a){return s("div",{key:a,staticClass:"card-related-matters subtasks-box"},[e.showEdit?s("sub-task",{attrs:{subTaskCom:"edit",time:e.stop_time,subData:e,text:e.name,taskId:t.subTaskID,checkboxData:e.checked,taskData:t.taskData},on:{"on-handle":function(a){t.handleSubTasksBlock(a,e)}}}):s("div",{staticClass:"show-edit"},[s("div",{staticStyle:{display:"inline-block"},on:{click:function(t){t.stopPropagation()}}},[s("el-checkbox",{on:{change:function(a){t.subtasksCheckbox(e,a)}},model:{value:e.checked,callback:function(a){t.$set(e,"checked",a)},expression:"item.checked"}})],1),t._v(" "),s("span",{staticClass:"item-name",style:{"text-decoration":e.checked?"line-through":"none"}},[t._v(t._s(e.name))]),t._v(" "),s("div",{staticClass:"edit-del-box"},[s("i",{staticClass:"wukong wukong-edit-task",on:{click:function(a){t.editSubTask(e)}}}),t._v(" "),s("i",{staticClass:"wukong wukong-delete-task",on:{click:function(a){t.deleteSubTask(e)}}})]),t._v(" "),s("div",{staticClass:"rt"},[s("flexbox",{staticClass:"rt-box"},[e.stop_time?s("div",{staticClass:"bg-color task-bg-color"},[t._v(t._s(t._f("moment")(e.stop_time,"MM-DD"))+" 截止")]):t._e(),t._v(" "),e.main_user_id?s("div",{directives:[{name:"photo",rawName:"v-photo",value:e,expression:"item"},{name:"lazy",rawName:"v-lazy:background-image",value:t.$options.filters.filterUserLazyImg(e.thumb_img),expression:"$options.filters.filterUserLazyImg(item.thumb_img)",arg:"background-image"}],key:e.thumb_img,staticClass:"div-photo"}):t._e()])],1)])],1)}):t._e(),t._v(" "),t.addSubtasks?s("div",{staticClass:"add-subtasks",on:{click:function(e){t.addSubtasks=!1}}},[s("span",{staticClass:"el-icon-plus"}),t._v(" "),s("span",[t._v("添加子任务")])]):s("sub-task",{attrs:{subTaskCom:"new",taskData:t.taskData},on:{"on-handle":t.handleSubTasksBlock}})],2):t._e(),t._v(" "),0!=t.fileList.length?s("div",{staticClass:"card-content-row card-content-row-column"},[s("span",{staticClass:"color-label participant class-file"},[s("i",{staticClass:"wukong wukong-file"}),t._v(" "),s("span",[t._v("附件")])]),t._v(" "),s("div",{staticClass:"accessory-box"},t._l(t.fileList,function(e,a){return s("file-cell",{key:a,attrs:{data:e,cellIndex:a,module_id:t.id,showDelete:!0},on:{delete:t.accessoryDeleteFun}})}))]):t._e()])],1),t._v(" "),s("div",{staticClass:"border"}),t._v(" "),s("div",{staticClass:"card-footers"},[s("div",{staticClass:"footer-title"},[s("span",{on:{click:function(e){t.footerTitle(0)}}},[t.isComment?s("i",{staticClass:"wukong wukong-comment-task",staticStyle:{color:"#3E84E9"}}):s("i",{staticClass:"wukong wukong-comment-task"}),t._v(" "),s("span",{staticClass:"cursor-pointer",style:{color:t.isComment?"#3E84E9":"#666"}},[t._v("评论")])]),t._v(" "),s("span",{staticClass:"title-border"}),t._v(" "),s("span",{on:{click:function(e){t.footerTitle(1)}}},[t.isComment?s("i",{staticClass:"wukong wukong-activity-task",staticStyle:{"font-size":"18px"}}):s("i",{staticClass:"wukong wukong-activity-task",staticStyle:{color:"#3E84E9","font-size":"18px"}}),t._v(" "),s("span",{staticClass:"cursor-pointer",style:{color:t.isComment?"#666":"#3E84E9"},on:{click:function(e){t.footerTitle(t.isComment)}}},[t._v("活动")])])]),t._v(" "),s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.commentsLoading,expression:"commentsLoading"}],staticClass:"footer-content-box"},[s("div",{staticClass:"footer-content"},[t.commentsActivities?s("div",{staticClass:"add-comments"},[s("div",{staticClass:"footer-img"},[s("div",{directives:[{name:"photo",rawName:"v-photo",value:t.userInfo,expression:"userInfo"},{name:"lazy",rawName:"v-lazy:background-image",value:t.$options.filters.filterUserLazyImg(t.userInfo.thumb_img),expression:"$options.filters.filterUserLazyImg(userInfo.thumb_img)",arg:"background-image"}],key:t.userInfo.thumb_img,staticClass:"div-photo"})]),t._v(" "),s("div",{staticClass:"comments-con"},[t.addComments?s("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:t.commentsSubmit,expression:"commentsSubmit"}],staticClass:"comments-box"},[s("el-input",{ref:"commentsTextareaRef",attrs:{type:"textarea",rows:4,placeholder:"添加评论"},on:{blur:t.blurFun},model:{value:t.commentsTextarea,callback:function(e){t.commentsTextarea=e},expression:"commentsTextarea"}}),t._v(" "),s("div",{staticClass:"btn-group"},[s("el-popover",{attrs:{placement:"top",width:"400",trigger:"click"},model:{value:t.commentsPopover,callback:function(e){t.commentsPopover=e},expression:"commentsPopover"}},[s("emoji",{on:{select:t.selectEmoji}}),t._v(" "),s("img",{staticClass:"smiling-img",attrs:{slot:"reference",src:a("woiz")},slot:"reference"})],1),t._v(" "),s("el-button",{staticClass:"rt",attrs:{type:"primary"},on:{click:t.commentsSub}},[t._v("发布")])],1)],1):s("div",{staticClass:"footer-bg",on:{click:function(e){t.addComments=!0}}},[t._v("添加评论")]),t._v(" "),t.taskData.replyList&&0!=t.taskData.replyList.length?s("div",{staticClass:"discuss"},t._l(t.taskData.replyList,function(e,i){return s("div",{key:i,staticClass:"discuss-list"},[s("div",{directives:[{name:"photo",rawName:"v-photo",value:e.userInfo,expression:"discussItem.userInfo"},{name:"lazy",rawName:"v-lazy:background-image",value:t.$options.filters.filterUserLazyImg(e.userInfo.thumb_img),expression:"$options.filters.filterUserLazyImg(discussItem.userInfo.thumb_img)",arg:"background-image"}],key:e.userInfo.thumb_img,staticClass:"div-photo head-img header-circle"}),t._v(" "),s("span",{staticClass:"name"},[t._v(t._s(e.userInfo.realname))]),t._v(" "),s("span",{staticClass:"time"},[t._v(t._s(t._f("moment")(e.create_time,"YYYY-MM-DD HH:mm")))]),t._v(" "),s("div",{staticClass:"rt"},[s("span",{on:{click:function(a){t.discussDelete(e,t.taskData.replyList,i)}}},[t._v("删除")]),t._v(" "),s("span",{on:{click:function(a){t.discussBtn(e,-1)}}},[t._v("回复")])]),t._v(" "),s("p",{staticClass:"reply-title"},[s("span",{domProps:{innerHTML:t._s(t.emoji(e.content))}})]),t._v(" "),s("p",{staticClass:"discuss-content",domProps:{innerHTML:t._s(t.emoji(e.reply_content))}}),t._v(" "),e.replyList&&e.replyList.length>0?s("div",{staticClass:"children-reply"},t._l(e.replyList,function(a,i){return s("div",{key:i,staticClass:"discuss-list"},[s("div",{directives:[{name:"photo",rawName:"v-photo",value:a.userInfo,expression:"childDiscussItem.userInfo"},{name:"lazy",rawName:"v-lazy:background-image",value:t.$options.filters.filterUserLazyImg(a.userInfo.thumb_img),expression:"$options.filters.filterUserLazyImg(childDiscussItem.userInfo.thumb_img)",arg:"background-image"}],key:a.userInfo.thumb_img,staticClass:"div-photo head-img header-circle"}),t._v(" "),s("span",{staticClass:"name"},[t._v(t._s(a.userInfo.realname))]),t._v(" "),s("span",{staticClass:"time"},[t._v(t._s(t._f("moment")(a.create_time,"YYYY-MM-DD HH:mm")))]),t._v(" "),s("div",{staticClass:"rt"},[s("span",{on:{click:function(s){t.discussDelete(a,e.replyList,i)}}},[t._v("删除")]),t._v(" "),s("span",{on:{click:function(a){t.discussBtn(e,i)}}},[t._v("回复")])]),t._v(" "),s("p",{staticClass:"reply-title"},[[s("span",[t._v("回复")]),t._v(" "),s("span",{staticClass:"reply"},[t._v("@"+t._s(a.replyuserInfo.realname)+"：")])],t._v(" "),s("span",{domProps:{innerHTML:t._s(t.emoji(a.content))}})],2)])})):t._e(),t._v(" "),e.show?s("div",{staticClass:"comment-box"},[s("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},on:{blur:t.blurFun},model:{value:t.childCommentsTextarea,callback:function(e){t.childCommentsTextarea=e},expression:"childCommentsTextarea"}}),t._v(" "),s("div",{staticClass:"btn-group"},[s("el-popover",{attrs:{placement:"top",width:"400",trigger:"click"},model:{value:t.childCommentsPopover,callback:function(e){t.childCommentsPopover=e},expression:"childCommentsPopover"}},[s("emoji",{on:{select:t.selectEmojiChild}}),t._v(" "),s("img",{staticClass:"smiling-img",attrs:{slot:"reference",src:a("woiz")},slot:"reference"})],1),t._v(" "),s("div",{staticClass:"btn-box"},[s("el-button",{attrs:{type:"primary",loading:t.contentLoading},on:{click:function(e){t.childCommentSubmit()}}},[t._v("回复")]),t._v(" "),s("el-button",{on:{click:function(t){e.show=!1}}},[t._v("取消")])],1)],1)],1):t._e()])})):t._e()])]):s("div",{staticClass:"activity-box"},[0!=t.activityList.length?t._l(t.activityList,function(e,a){return s("div",{key:a,staticClass:"activity-list"},[s("div",{directives:[{name:"photo",rawName:"v-photo",value:e,expression:"item"},{name:"lazy",rawName:"v-lazy:background-image",value:t.$options.filters.filterUserLazyImg(e.thumb_img),expression:"$options.filters.filterUserLazyImg(item.thumb_img)",arg:"background-image"}],key:e.thumb_img,staticClass:"div-photo"}),t._v(" "),s("span",{staticClass:"activity-name"},[t._v(t._s(e.realname))]),t._v(" "),s("span",[t._v(t._s(e.content))]),t._v(" "),s("span",{staticClass:"activity-time"},[t._v(t._s(t._f("moment")(e.create_time,"MM-DD HH:mm")))])])}):t._e()],2)])])]),t._v(" "),t._t("default")],2):t._e(),t._v(" "),t.taskData&&t.taskData.create_user_info?s("div",{staticClass:"tip"},[s("span",[t._v(t._s(t.taskData.create_user_info.realname)+" 创建于 "+t._s(t._f("moment")(t.taskData.create_time,"YYYY-MM-DD HH:mm:ss")))])]):t._e(),t._v(" "),s("c-r-m-full-screen-detail",{attrs:{visible:t.showRelatedDetail,crmType:t.relatedCRMType,id:t.relatedID},on:{"update:visible":function(e){t.showRelatedDetail=e}}})],1)],1)},[],!1,null,"09751c8a",null));N.options.__file="particulars.vue";e.default=N.exports},"+kCF":function(t,e,a){},"0a39":function(t,e,a){"use strict";var s=a("81Ki");a.n(s).a},"11/t":function(t,e,a){},"3RV3":function(t,e,a){},"6K8m":function(t,e,a){"use strict";var s=a("11/t");a.n(s).a},"7z+D":function(t,e,a){"use strict";var s=a("ExMk"),i=a("KTTK"),n=a("Ew9n"),o=a("EP+0"),l=a("3biH"),c=a("Er7M"),r=a("O1Uw"),d=(a("wd/R"),a("7Qib")),u={name:"examine-detail",components:{SlideView:n.a,CreateSections:o.a,ExamineInfo:l.a,RelatedBusinessCell:c.a,CRMFullScreenDetail:function(){return a.e("chunk-623a").then(a.bind(null,"uMjE"))},FileCell:r.a},props:{id:[String,Number],noListenerClass:{type:Array,default:function(){return["list-box"]}}},watch:{id:function(t){this.getDetial()}},data:function(){return{loading:!1,category_id:"",detail:{},list:[],category_name:"",fileList:[],imgList:[],travelList:[],travelField:[{prop:"vehicle",label:"交通工具"},{prop:"trip",label:"单程往返"},{prop:"start_address",label:"出发城市"},{prop:"end_address",label:"目的城市"},{prop:"start_time",label:"开始时间"},{prop:"end_time",label:"结束时间"},{prop:"duration",label:"时长（天）"},{prop:"description",label:"备注"}],expensesField:[{prop:"start_address",label:"出发城市"},{prop:"end_address",label:"目的城市"},{prop:"start_time",label:"开始时间"},{prop:"end_time",label:"结束时间"},{prop:"traffic",label:"交通费（元）"},{prop:"stay",label:"住宿费（元）"},{prop:"diet",label:"餐饮费（元）"},{prop:"other",label:"其他费用（元）"},{prop:"description",label:"费用明细描述"}],relatedID:"",relatedCRMType:"",showRelatedDetail:!1}},computed:{relatedListData:function(){return{contacts:this.detail.contactsList||[],customer:this.detail.customerList||[],business:this.detail.businessList||[],contract:this.detail.contractList||[]}}},mounted:function(){this.getDetial()},methods:{getBaseInfo:function(){var t=this;this.loading=!0,Object(i.i)({types:"oa_examine",module:"oa",controller:"examine",action:"read",action_id:this.id,types_id:this.category_id}).then(function(e){var a=t;t.list=e.data.map(function(t,e){return a.handleShowInfo(t)}),t.loading=!1}).catch(function(){t.loading=!1})},handleShowInfo:function(t){return"date"===t.form_type&&"0000-00-00"==t.value?t.value="":"datetime"===t.form_type&&(0==t.value?t.value="":t.value=t.value?Object(d.m)(t.value,"YYYY-MM-DD HH:mm:ss"):""),t},getDetial:function(){var t=this;this.loading=!0,Object(s.e)({id:this.id}).then(function(e){t.loading=!1,t.category_id=e.data.category_id,t.getBaseInfo(),t.detail=e.data,t.category_name=t.detail.category_name,t.fileList=t.detail.fileList,t.imgList=t.detail.imgList,t.travelList=t.detail.travelList}).catch(function(){t.loading=!1})},fieldFormatter:function(t,e){return 3!=this.category_id||"start_time"!=e.property&&"end_time"!=e.property?5!=this.category_id||"start_time"!=e.property&&"end_time"!=e.property?t[e.property]:t[e.property]?Object(d.m)(t[e.property],"YYYY-MM-DD"):"":t[e.property]?Object(d.m)(t[e.property],"YYYY-MM-DD HH:mm:ss"):""},hideView:function(){this.$emit("hide-view")},checkRelatedDetail:function(t,e){this.relatedID=e[t+"_id"],this.relatedCRMType=t,this.showRelatedDetail=!0},handleFile:function(t,e,a){if("preview"===t){if(e&&e.length>0){var s=e.map(function(t){return t.url=t.file_path,t});this.$bus.emit("preview-image-bus",{index:a,data:s})}}else"download"===t&&Object(d.a)({path:e.file_path,name:e.name})},imgZoom:function(t,e){this.$bus.emit("preview-image-bus",{index:e,data:t.map(function(t,e,a){return{url:t.file_path,name:t.name}})})},downloadFile:function(t){Object(d.a)({path:t.file_path,name:t.name})},examineHandle:function(t){this.$store.dispatch("GetOAMessageNum","examine"),this.$emit("on-examine-handle",t)}}},m=(a("0a39"),a("KHd+")),h=Object(m.a)(u,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("slide-view",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"d-view",attrs:{listenerIDs:["workbench-main-container"],noListenerClass:t.noListenerClass,"body-style":{padding:"10px 30px",height:"100%"}},on:{"side-close":t.hideView}},[s("flexbox",{staticStyle:{height:"100%"},attrs:{orient:"vertical"}},[s("flexbox",{staticClass:"detail-header"},[s("div",{staticClass:"header-name"},[t._v(t._s(t.category_name))]),t._v(" "),s("img",{staticClass:"header-close",attrs:{src:a("cjwK")},on:{click:t.hideView}})]),t._v(" "),s("div",{staticClass:"detail-body"},[s("flexbox",{attrs:{gutter:0,align:"stretch",wrap:"wrap"}},t._l(t.list,function(e,i){return"examine_cause"!==e.form_type&&"business_cause"!==e.form_type?s("flexbox-item",{key:i,staticClass:"b-cell",attrs:{span:.5}},["user"===e.form_type?s("flexbox",{staticClass:"b-cell-b",attrs:{align:"stretch"}},[s("div",{staticClass:"b-cell-name"},[t._v(t._s(e.name))]),t._v(" "),s("div",{staticClass:"b-cell-value"},[s("flexbox",{staticStyle:{padding:"0px 10px 10px 0px"},attrs:{gutter:0,wrap:"wrap"}},t._l(e.value,function(e,a){return s("div",{key:a},[t._v("\n                  "+t._s(e.realname)+"  \n                ")])}))],1)]):"structure"===e.form_type?s("flexbox",{staticClass:"b-cell-b",attrs:{align:"stretch"}},[s("div",{staticClass:"b-cell-name"},[t._v(t._s(e.name))]),t._v(" "),s("div",{staticClass:"b-cell-value"},[s("flexbox",{staticStyle:{padding:"0px 10px 10px 0px"},attrs:{gutter:0,wrap:"wrap"}},t._l(e.value,function(e,a){return s("div",{key:a},[t._v("\n                  "+t._s(e.name)+"  \n                ")])}))],1)]):"checkbox"===e.form_type?s("flexbox",{staticClass:"b-cell-b",attrs:{align:"stretch"}},[s("div",{staticClass:"b-cell-name"},[t._v(t._s(e.name))]),t._v(" "),s("div",{staticClass:"b-cell-value"},[s("flexbox",{staticStyle:{padding:"0px 10px 10px 0px"},attrs:{gutter:0,wrap:"wrap"}},t._l(e.value,function(e,a){return s("div",{key:a},[t._v("\n                  "+t._s(e)+"  \n                ")])}))],1)]):"file"===e.form_type?s("flexbox",{staticClass:"b-cell-b",attrs:{align:"stretch"}},[s("div",{staticClass:"b-cell-name"},[t._v(t._s(e.name))]),t._v(" "),s("div",{staticClass:"b-cell-value"},t._l(e.value,function(i,n){return s("flexbox",{key:n,staticClass:"f-item"},[s("img",{staticClass:"f-img",attrs:{src:a("6KEE")}}),t._v(" "),s("div",{staticClass:"f-name"},[t._v(t._s(i.name.length>15?i.name.substring(0,15)+"...":i.name+"("+i.size+")"))]),t._v(" "),s("el-button",{attrs:{type:"text"},nativeOn:{click:function(a){t.handleFile("preview",e.value,n)}}},[t._v("预览")]),t._v(" "),s("el-button",{attrs:{type:"text"},nativeOn:{click:function(e){t.handleFile("download",i,n)}}},[t._v("下载")])],1)}))]):s("flexbox",{staticClass:"b-cell-b",attrs:{align:"stretch"}},[s("div",{staticClass:"b-cell-name"},[t._v(t._s(e.name))]),t._v(" "),s("div",{staticClass:"b-cell-value"},[t._v(t._s(e.value))])])],1):t._e()})),t._v(" "),t.fileList.length>0||t.imgList.length>0?s("div",{staticClass:"accessory"},[s("div",{staticClass:"upload-img-box"},t._l(t.imgList,function(e,a){return s("div",{key:a,staticClass:"img-list",on:{click:function(e){t.imgZoom(t.imgList,a)}}},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.file_path_thumb,expression:"imgItem.file_path_thumb"}],key:e.file_path_thumb})])})),t._v(" "),s("div",{staticClass:"accessory-box"},t._l(t.fileList,function(t,e){return s("file-cell",{key:e,attrs:{data:t,cellIndex:e}})}))]):t._e(),t._v(" "),t.category_id&&3==t.category_id&&t.travelList&&t.travelList.length>0?s("create-sections",{staticClass:"create-sections",attrs:{title:"行程"}},[s("el-table",{staticStyle:{"font-size":"13px"},attrs:{data:t.travelList,align:"center","header-align":"center",stripe:""}},t._l(t.travelField,function(e,a){return s("el-table-column",{key:a,attrs:{"show-overflow-tooltip":"",prop:e.prop,formatter:t.fieldFormatter,label:e.label},scopedSlots:t._u([{key:"header",fn:function(e){return[s("div",{staticClass:"table-head-name"},[t._v(t._s(e.column.label))])]}}])})}))],1):t._e(),t._v(" "),t.category_id&&5==t.category_id&&t.travelList&&t.travelList.length>0?s("create-sections",{staticClass:"create-sections",attrs:{title:"报销"}},[s("el-table",{staticStyle:{"font-size":"13px"},attrs:{data:t.travelList,align:"center","header-align":"center",stripe:""}},[t._l(t.expensesField,function(e,a){return s("el-table-column",{key:a,attrs:{"show-overflow-tooltip":"",prop:e.prop,formatter:t.fieldFormatter,label:e.label},scopedSlots:t._u([{key:"header",fn:function(e){return[s("div",{staticClass:"table-head-name"},[t._v(t._s(e.column.label))])]}}])})}),t._v(" "),s("el-table-column",{attrs:{label:"发票",width:"50"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("flexbox",{attrs:{justify:"center"}},[s("el-button",{attrs:{type:"text"},nativeOn:{click:function(a){t.handleFile("preview",e.row.imgList,0)}}},[t._v(t._s(e.row.imgList.length)+"张")])],1)]}}])})],2)],1):t._e(),t._v(" "),t.relatedListData.contacts.length>0||t.relatedListData.customer.length>0||t.relatedListData.business.length>0||t.relatedListData.contract.length>0?s("create-sections",{staticClass:"create-sections",attrs:{title:"关联业务"}},[s("div",{staticClass:"related-business create-sections-content"},t._l(t.relatedListData,function(e,a){return s("div",{key:a},t._l(e,function(e,i){return s("related-business-cell",{key:i,attrs:{data:e,cellIndex:i,type:a,showFoot:!1},nativeOn:{click:function(s){t.checkRelatedDetail(a,e)}}})}))}))]):t._e(),t._v(" "),s("create-sections",{staticClass:"create-sections",attrs:{title:"审核信息"}},[s("examine-info",{staticClass:"create-sections-content",attrs:{id:t.id,examineType:"oa_examine",flow_id:t.detail.flow_id},on:{"on-handle":t.examineHandle}})],1)],1)],1),t._v(" "),s("c-r-m-full-screen-detail",{attrs:{visible:t.showRelatedDetail,crmType:t.relatedCRMType,id:t.relatedID},on:{"update:visible":function(e){t.showRelatedDetail=e}}})],1)},[],!1,null,"1d94d324",null);h.options.__file="examineDetail.vue";e.a=h.exports},"81Ki":function(t,e,a){},D3Aa:function(t,e,a){"use strict";var s=a("n0Sk");a.n(s).a},DcnZ:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjhDRDcyQTY3RTE2RTExRThCRTI2OUUxNDM4MTM1RjMzIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjhDRDcyQTY4RTE2RTExRThCRTI2OUUxNDM4MTM1RjMzIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OENENzJBNjVFMTZFMTFFOEJFMjY5RTE0MzgxMzVGMzMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OENENzJBNjZFMTZFMTFFOEJFMjY5RTE0MzgxMzVGMzMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6YLrWcAAAAYklEQVR42mL8//8/AzUBEwOVwaiBg9BAlrNnz9LEhZ5A/AyKPdHUkCTHeObMGQaogCRU0XMglkLSRJIctjBkxOMjgnIwA1OA+AUQPwXiZDSFJMnBvEw1wDhaOIwaSDoACDAAtBYiKbAuMEoAAAAASUVORK5CYII="},LuGD:function(t,e,a){"use strict";var s=a("qoQs");a.n(s).a},cEue:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjYzNEQ2RDE3MzRFNTExRTlCRjI5QUEzN0UzNDcxMUZDIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjYzNEQ2RDE4MzRFNTExRTlCRjI5QUEzN0UzNDcxMUZDIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NjM0RDZEMTUzNEU1MTFFOUJGMjlBQTM3RTM0NzExRkMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NjM0RDZEMTYzNEU1MTFFOUJGMjlBQTM3RTM0NzExRkMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4/GDLpAAABSElEQVR42oySvU4CURCFD/cVVHp+X0Cihp4QXkBXDBW/L0HCW0CgJGC0tSCEghJNtLDmr8ME9QUs0DPu3XXvLmaZ5BQ7d767c89M5LtehycUdUVdUxfUCfVOPVK31B21c4ojHjhO3VOn+D9eqEtq5fzJAWchIPT5TNf/wkq3E8VhEdX1SkCLyrhHrRYQi5nlySTQbHozUm8JXDIKBwOg0WBj8T+wWgWGQ38HJTFM3Dw20qkUUKkA4zGQzwPdLrBc+uE3FQAl5nNgMqGvNHY02gdKHAn8EUin00AuR1voS6EAJBL74E+BnwNguQx0OsB0CvR6QK1mv92MV4H7Rsqi+e02sF7b34uFfUGx6If7Yphc8GSMKzyk23Old1VmvT0Q3Or6nbOeYmdW7y5Cdjur693ddi44o+RxD9SG+pJ56u8bfe7O7UeAAQCsHFF+l0CFAgAAAABJRU5ErkJggg=="},fGWj:function(t,e,a){"use strict";var s=a("fu8a");a.n(s).a},fu8a:function(t,e,a){},n0Sk:function(t,e,a){},op8A:function(t,e,a){"use strict";var s=a("3RV3");a.n(s).a},qoQs:function(t,e,a){},uMjE:function(t,e,a){"use strict";a.r(e);var s=a("7Qib"),i=a("mqlf"),n=a("ppJE"),o=a("PS1M"),l=a("n1dw"),c=a("xfX+"),r=a("8gwX"),d=a("K6D0"),u=a("7z+D"),m={name:"c-r-m-full-screen-detail",components:{ClueDetail:i.a,CustomerDetail:n.a,ContactsDetail:o.a,BusinessDetail:l.a,ContractDetail:c.a,ProductDetail:r.a,MoneyDetail:d.a,ExamineDetail:u.a},watch:{visible:function(t){this.showDetail=t,t&&(document.body.appendChild(this.$el),this.$el.addEventListener("click",this.handleDocumentClick,!1),this.$el.style.zIndex=Object(s.g)())},showDetail:function(t){var e=this;t||setTimeout(function(){e.$emit("update:visible",!1)},350)}},computed:{tabName:function(){return"leads"==this.crmType?"clue-detail":"customer"==this.crmType?"customer-detail":"contacts"==this.crmType?"contacts-detail":"business"==this.crmType?"business-detail":"contract"==this.crmType?"contract-detail":"product"==this.crmType?"product-detail":"receivables"==this.crmType?"money-detail":"examine"==this.crmType?"examine-detail":""}},data:function(){return{showDetail:!1}},props:{id:[String,Number],crmType:{type:String,default:""},visible:{type:Boolean,default:!1}},mounted:function(){this.visible&&(document.body.appendChild(this.$el),this.$el.addEventListener("click",this.handleDocumentClick,!1),this.$el.style.zIndex=Object(s.g)())},methods:{hiddenView:function(){this.showDetail=!1},handleDocumentClick:function(t){t.stopPropagation(),this.$el==t.target&&(this.showDetail=!1)}},beforeDestroy:function(){this.$el&&this.$el.parentNode&&(this.$el.parentNode.removeChild(this.$el),this.$el.removeEventListener("click",this.handleDocumentClick,!1))}},h=(a("vl1X"),a("KHd+")),p=Object(h.a)(m,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"full-container"},[t.id&&t.showDetail?a(t.tabName,{tag:"component",staticClass:"d-view",attrs:{crmType:t.crmType,id:t.id},on:{"hide-view":t.hiddenView}}):t._e()],1)},[],!1,null,"2471320a",null);p.options.__file="CRMFullScreenDetail.vue";e.default=p.exports},vl1X:function(t,e,a){"use strict";var s=a("+kCF");a.n(s).a}}]);