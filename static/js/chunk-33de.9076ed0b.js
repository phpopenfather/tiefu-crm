(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-33de"],{"11C4":function(e,t,i){},"27fp":function(e,t,i){"use strict";var s=i("lRqb");i.n(s).a},"3gs7":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAASCAYAAABSO15qAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjcxMEMyOTg1QzBBMzExRThCRjRERkU3Mzg5NDBDQTlCIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjcxMEMyOTg2QzBBMzExRThCRjRERkU3Mzg5NDBDQTlCIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NzEwQzI5ODNDMEEzMTFFOEJGNERGRTczODk0MENBOUIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NzEwQzI5ODRDMEEzMTFFOEJGNERGRTczODk0MENBOUIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4G5F1NAAAA5UlEQVR42mJctWpVAwMDQyUQszGQBn4CcRMLkKgC4j9AfJZEA7SBuAZkwEUgNgTiTCA+TaRmJyDeA8SHmIBEERCD6NlAzEKEZj4gng/EH4E4EaTxMBAvB2J9IC4hwoB+IJYD4lQgvs8EFSwD4i9AXAfEKng0+wBxEhDPAOI1DFCng8BTIG4FYk6oJCMWzUJQb4LCrBAmyITmtNtA7AzE8VgMmA7EvEAcAcQ/sBnwE8nkDjTNnUAcBsRZQHwDWYIJTeFWKC2OJl4GpRehO4uJgUIwDAzAlnQ3UWqA/4B7gYEUbwEEGAANECY5RBCuPwAAAABJRU5ErkJggg=="},"5hU7":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjZDRTM3MDlBRUUzODExRTg4Njk3OTRBOTFDQjJDRjRCIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjZDRTM3MDlCRUUzODExRTg4Njk3OTRBOTFDQjJDRjRCIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NkNFMzcwOThFRTM4MTFFODg2OTc5NEE5MUNCMkNGNEIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NkNFMzcwOTlFRTM4MTFFODg2OTc5NEE5MUNCMkNGNEIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz52FujQAAAAVklEQVR42mK0a3nJQC44WC3GwMRAISBkwBEgPoxPAQsBA6wpdQHD0DIAFGD/0TAMoIsfptQFjNhiwQaLwv/oGoZhLBBKiUcpNcCGYHT8//+fIi8ABBgA6ZAToBWLB7IAAAAASUVORK5CYII="},"5qxJ":function(e,t,i){"use strict";var s=i("k5Y1");i.n(s).a},"6Aus":function(e,t,i){"use strict";var s=i("woQC");i.n(s).a},"8KYw":function(e,t,i){"use strict";var s=i("11C4");i.n(s).a},"95V8":function(e,t,i){"use strict";var s=i("s7Zx");i.n(s).a},B4ez:function(e,t,i){},GsAi:function(e,t,i){},HfS2:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjZBOTA3QjY4RUUzODExRTg5NkQyQzE5MENDMkUwODZEIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjZBOTA3QjY5RUUzODExRTg5NkQyQzE5MENDMkUwODZEIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NkE5MDdCNjZFRTM4MTFFODk2RDJDMTkwQ0MyRTA4NkQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NkE5MDdCNjdFRTM4MTFFODk2RDJDMTkwQ0MyRTA4NkQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz77tjJFAAABTElEQVR42qTTzyvEQRjH8V0hbk6r/Ngc2CgnthC2Jc7KKsVfIOtGrbuNoiRaf4FSGzlL2oMD+XHSJvaEhJM9rRvvR5+tOXz3G5l61czOM8/OzDPfYGzlLfCfVuUzl8eX5P+aoBHNaBDrh7wCq53+NlpwizmkUdRcWrvYRTeeseDuIIpJ5FCPPuxgHINK3q+5nGKj7g4yWMeWxsM4RUHjdsxiUeOgkg6UExxiGfsoIYsZJbE2igNEtAuL3XR3sIYYelGHC2dxQP1zjOET11pTsQo1Hr/V+pUxpX+3zCfqx524EfRo7kbzKfcIdqureNV4Cnt40G7akFBZi4qdtmOUE8zjSK+uVfXuxJDmz9CEDTxhCRPuES5VibiqYJeYxLEkdYklxVjs1U89K3xM9pTvEdb4ER1493vKbrOsL/jQ+M5rsV8Ca12/+Zy/BRgAE3dJqM+BEpAAAAAASUVORK5CYII="},NS7n:function(e,t,i){"use strict";var s={name:"filterContent",props:{obj:{default:{},required:!0}},watch:{obj:function(e){this.showObj=e}},computed:{},data:function(){return{optionsNames:{is:"等于",isnot:"不等于",contains:"包含",not_contain:"不包含",start_with:"开始于",end_with:"结束于",is_empty:"为空",is_not_empty:"不为空",eq:"等于",neq:"不等于",gt:"大于",egt:"大于等于",lt:"小于",elt:"小于等于"},showObj:{}}},mounted:function(){this.showObj=this.obj},methods:{handleDelete:function(e,t){this.$delete(this.showObj.obj,e.field),this.showObj.form.splice(t,1),this.$emit("delete",{item:e,index:t,obj:this.showObj})},getTypesName:function(e){return e.type_id&&e.typeOption.find(function(t){return t.type_id===e.type_id}).name||""},getStatusName:function(e){if(e.status_id){var t=e.statusOption.find(function(t){return t.status_id===e.status_id});return t.name?"-"+t.name:""}return""}}},a=(i("27fp"),i("KHd+")),n=Object(a.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"wrapper"},[i("ul",{staticClass:"list"},e._l(e.showObj.form,function(t,s){return i("li",{key:s,staticClass:"list-item"},["date"==t.form_type&&t.value.length>1?i("span",[e._v(e._s(t.name+" “"+t.value[0]+"-"+t.value[1]+"”"))]):"datetime"===t.form_type&&t.value.length>1?i("span",[e._v(e._s(t.name+" “"+t.value[0]+"-"+t.value[1]+"”"))]):"business_type"===t.form_type&&t.status_id?i("span",[e._v(e._s(t.name+" “"+e.getTypesName(t)+e.getStatusName(t)+"”"))]):"address"===t.form_type?i("span",[e._v(e._s(t.name+" "+t.address.state+" "+t.address.city+" "+t.address.area))]):"user"===t.form_type&&t.value.length>0?i("span",[e._v(e._s(t.name+" "+e.optionsNames[t.condition]+"“"+t.value[0].realname+"”"))]):"category"===t.form_type&&t.value.length>0?i("span",[e._v(e._s(t.name+" “"+t.valueContent+"”"))]):i("span",[e._v(e._s(t.name+" "+e.optionsNames[t.condition]+"“"+t.value+"”"))]),e._v(" "),i("i",{staticClass:"el-icon-close icon",on:{click:function(i){e.handleDelete(t,s)}}})])}))])},[],!1,null,"46f3d3b4",null);n.options.__file="filterContent.vue";t.a=n.exports},Ny23:function(e,t,i){"use strict";var s=i("GsAi");i.n(s).a},YWwE:function(e,t,i){"use strict";var s=i("mBo6");i.n(s).a},bec2:function(e,t,i){"use strict";var s=i("l/97");i.n(s).a},bwvB:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjdFOTRBNUY2RjEzRTExRThCMzE4RjAyMzQwQTc5RjQ3IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjdFOTRBNUY3RjEzRTExRThCMzE4RjAyMzQwQTc5RjQ3Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6N0U5NEE1RjRGMTNFMTFFOEIzMThGMDIzNDBBNzlGNDciIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6N0U5NEE1RjVGMTNFMTFFOEIzMThGMDIzNDBBNzlGNDciLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4t60rSAAAAkUlEQVR42mL8//8/AzUBEwOVAQuMsXr1arINCQ0NJdmFOtT0ch0QXwbiepK8jAOADIH5B0Y3kuvCGqghjlC+I5RfQ66BD6CGvIbyX0P5D8j18hIsYq9xiNMuHQ49A0nN2P/JdSHjoPHycyC2IVKvNRC/IJQOU0AFDxBLEGHgUyBOJmTgNiCWpMTLjIO+xAYIMABJgBzD8GiSjgAAAABJRU5ErkJggg=="},jJjR:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjlFRDNFMUVGRjEzRTExRThBNjFERkQ5M0I1RDI1OUYzIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjlFRDNFMUYwRjEzRTExRThBNjFERkQ5M0I1RDI1OUYzIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OUVEM0UxRURGMTNFMTFFOEE2MURGRDkzQjVEMjU5RjMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OUVEM0UxRUVGMTNFMTFFOEE2MURGRDkzQjVEMjU5RjMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7Zm7p3AAABUklEQVR42qyUwUoCURSGnaGNtFSqdS8ggQS2sPAJ3AzlIhDzAVr4FJIgroMEFyqzKaFlQS0KxIWtxZZCoTvTndN/4x8QOQdnaC58c2fu/c/PnHvPvZbnebEo2455uK77byPHcf56W5k34wXQA9/AY9/juBYnThyCPqiBIQ2O2A853qdOTnnD7B08gjMw35h/AlXQoC4DPrU/NO9d8ABKgpnf5py/p97WDC/AAbgWTKRSMLp9xomGl+AOLAJu7BI0GScapsFLyGp5BSltU5IsDS3N9W+L/RdIaIZTsCcE+WaW8IdmDWdaygNwGjLlLPjQDFugCOIBzeLUtzTDDtekLgRL6dap72hruGJNvfG9An4Eo11wA/LghFr16I0pMidgBG7BMzfMVEEOlMGEuvG2s+ybHoNzXghXNJtx4ypMcxXkclhPv01CNSvqG9uORdx+BRgAmcBOEZLrcDgAAAAASUVORK5CYII="},k5Y1:function(e,t,i){},kegP:function(e,t,i){"use strict";var s=i("GQeE"),a=i.n(s),n=i("QbLZ"),l=i.n(n),c=i("L2JU"),o=i("4peS"),r=i.n(o),d=i("EgJF"),h=i("vG5h"),u=i("5tgW"),m=i("qbf4"),f=i("YrMO"),p=i("KzkL"),v=i("8GhS"),g={name:"c-r-m-import",components:{XhUserCell:v.p},data:function(){return{loading:!1,showDialog:!1,config:1,file:{name:""},user:[],fieldUniqueInfo:""}},computed:l()({},Object(c.b)(["userInfo"]),{crmTypeName:function(){return{customer:"客户",leads:"线索",contacts:"联系人",product:"产品"}[this.crmType]||""}}),props:{show:{type:Boolean,default:!1},crmType:{type:String,default:""}},watch:{show:function(e){this.showDialog=e,this.fieldUniqueInfo||this.getFieldUniqueInfo()}},mounted:function(){this.user.push(this.userInfo)},methods:{sure:function(){var e=this,t={};if(this.file.name)if("customer"==this.crmType||this.user&&0!=this.user.length){t.config=this.config,t.file=this.file,t.owner_user_id=this.user.length>0?this.user[0].id:"";var i={customer:h.e,leads:u.d,contacts:m.d,product:f.c}[this.crmType];this.loading=!0,i(t).then(function(t){e.loading=!1,e.$message.success(t.data),e.closeView()}).catch(function(){e.loading=!1})}else this.$message.error("请选择负责人");else this.$message.error("请选择导入文件")},download:function(){var e=document.createElement("a");e.href=window.BASE_URL+{customer:h.c,leads:u.b,contacts:m.b,product:f.a}[this.crmType],e.target="_black",document.body.appendChild(e),e.click(),document.body.removeChild(e)},selectFile:function(){document.getElementById("importInputFile").click()},uploadFile:function(e){var t=e.target.files[0];this.file=t,e.target.value=""},userSelect:function(e){e.value&&e.value.length>0?this.user=e.value:this.user=[]},closeView:function(){this.$emit("close")},getFieldUniqueInfo:function(){var e=this;Object(p.a)({types:"crm_"+this.crmType}).then(function(t){e.fieldUniqueInfo=t.data}).catch(function(){})}}},b=(i("zyqF"),i("KHd+")),y=Object(b.a)(g,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"资料导入中","element-loading-spinner":"el-icon-loading",visible:e.showDialog,title:"导入"+e.crmTypeName,width:"550px","append-to-body":!0},on:{"update:visible":function(t){e.showDialog=t},close:e.closeView}},[i("div",{staticClass:"dialog-body"},[i("div",{staticClass:"sections"},[i("div",[e._v("一、请按照数据模板的格式准备要导入的数据。"),i("span",{staticClass:"download",on:{click:e.download}},[e._v("点击下载")]),e._v("《"+e._s(e.crmTypeName)+"导入模板》")]),e._v(" "),i("div",{staticClass:"content content-tips"},[i("div",[e._v("注意事项：")]),e._v(" "),i("div",[e._v("1、模板中的表头名称不能更改，表头行不能删除")]),e._v(" "),i("div",[e._v("2、其中标*为必填项，必须填写")]),e._v(" "),i("div",[e._v("3、导入文件请勿超过20MB")])])]),e._v(" "),i("div",{staticClass:"sections"},[i("flexbox",{attrs:{align:"initial"}},[i("div",[e._v("二、")]),e._v(" "),i("div",[e._v("请选择数据重复时的处理方式（查重规则：【"+e._s(e.fieldUniqueInfo)+"】）")])]),e._v(" "),i("div",{staticClass:"content"},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:e.config,callback:function(t){e.config=t},expression:"config"}},e._l([{name:"覆盖系统原有数据",value:1},{name:"跳过",value:0}],function(e,t){return i("el-option",{key:t,attrs:{label:e.name,value:e.value}})}))],1)],1),e._v(" "),i("div",{staticClass:"sections"},[i("div",[e._v("三、请选择需要导入的文件")]),e._v(" "),i("div",{staticClass:"content"},[i("flexbox",{staticClass:"file-select"},[i("el-input",{attrs:{disabled:!0},model:{value:e.file.name,callback:function(t){e.$set(e.file,"name",t)},expression:"file.name"}}),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.selectFile}},[e._v("选择文件")])],1)],1)]),e._v(" "),i("div",{staticClass:"sections"},[i("div",[e._v("四、请选择负责人（"+e._s("customer"==e.crmType?"如不选择，导入的客户将进入公海":"必选")+"）")]),e._v(" "),i("div",{staticClass:"content"},[i("div",{staticClass:"user-cell"},[i("xh-user-cell",{attrs:{value:e.user},on:{"value-change":e.userSelect}})],1)])]),e._v(" "),i("input",{attrs:{type:"file",id:"importInputFile",accept:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"},on:{change:e.uploadFile}})]),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.closeView}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.sure}},[e._v("确 定")])],1)])},[],!1,null,"a197ad6e",null);y.options.__file="CRMImport.vue";var _=y.exports,C={name:"CRM-list-head",components:{CRMCreateView:d.default,CRMImport:_},computed:l()({},Object(c.b)(["crm"]),{canSave:function(){return!this.isSeas&&this.crm[this.crmType].save}}),data:function(){return{inputContent:"",moreTypes:[],createActionInfo:{type:"save"},createCRMType:"",isCreate:!1,showCRMImport:!1}},props:{title:{type:String,default:""},placeholder:{type:String,default:"请输入内容"},mainTitle:{type:String,default:""},crmType:{type:String,default:""},isSeas:{type:Boolean,default:!1}},mounted:function(){this.isSeas?this.crm[this.crmType].poolexcelexport&&this.moreTypes.push({type:"out",name:"导出"}):(this.crm[this.crmType].excelimport&&this.moreTypes.push({type:"enter",name:"导入"}),this.crm[this.crmType].excelexport&&this.moreTypes.push({type:"out",name:"导出"}))},methods:{handleTypeDrop:function(e){"out"==e?this.$emit("on-export"):"enter"==e&&(this.showCRMImport=!0)},createClick:function(){this.createCRMType=this.crmType,this.createActionInfo={type:"save"},this.isCreate=!this.isCreate},searchInput:function(){this.$emit("on-search",this.inputContent)},createSaveSuccess:function(e){e&&e.saveAndCreate?"customer"==e.type&&(this.createCRMType="contacts",this.createActionInfo={type:"relative",crmType:"customer",data:{}},this.createActionInfo.data.customer=e.data,this.isCreate=!0):this.$emit("on-handle",{type:"save-success"})},hideView:function(){this.isCreate=!1}}},k=(i("5qxJ"),Object(b.a)(C,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"c-container"},[i("div",{staticClass:"title"},[e._v(e._s(e.title))]),e._v(" "),i("el-input",{staticClass:"sc-container",attrs:{placeholder:e.placeholder},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.searchInput(t):null}},model:{value:e.inputContent,callback:function(t){e.inputContent=t},expression:"inputContent"}},[i("el-button",{attrs:{slot:"append",icon:"el-icon-search"},nativeOn:{click:function(t){return e.searchInput(t)}},slot:"append"})],1),e._v(" "),i("div",{staticClass:"right-container"},[e.canSave?i("el-button",{attrs:{type:"primary"},on:{click:e.createClick}},[e._v(e._s(e.mainTitle))]):e._e(),e._v(" "),e.moreTypes.length>0?i("el-dropdown",{attrs:{trigger:"click"},on:{command:e.handleTypeDrop}},[i("flexbox",{staticClass:"right-more-item"},[i("div",[e._v("更多")]),e._v(" "),i("i",{staticClass:"el-icon-arrow-down el-icon--right",staticStyle:{color:"#777"}})]),e._v(" "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.moreTypes,function(t,s){return i("el-dropdown-item",{key:s,attrs:{command:t.type}},[e._v(e._s(t.name))])}))],1):e._e()],1),e._v(" "),e.isCreate?i("c-r-m-create-view",{attrs:{"crm-type":e.createCRMType,action:e.createActionInfo},on:{"save-success":e.createSaveSuccess,"hiden-view":e.hideView}}):e._e(),e._v(" "),i("c-r-m-import",{attrs:{show:e.showCRMImport,crmType:e.crmType},on:{close:function(t){e.showCRMImport=!1}}})],1)},[],!1,null,"6dd71341",null));k.options.__file="CRMListHead.vue";var I=k.exports,A=i("UcQx"),w=i("6zBA"),D=i("ooHJ"),R=i("oWS4"),T=i("NS7n"),S={name:"scene-list",components:{},computed:l()({},Object(c.b)(["crm"])),data:function(){return{sceneSelectId:-1,sceneList:[]}},watch:{},props:{crmType:{type:String,default:""}},mounted:function(){this.crm[this.crmType].index&&this.getSceneList()},methods:{getSceneList:function(){var e=this;Object(p.o)({types:"crm_"+this.crmType}).then(function(t){var i=t.data.list.filter(function(e,t){return 1===e.is_default});if(i&&i.length>0){var s=i[0];e.sceneSelectId=s.scene_id,e.$emit("scene",{id:s.scene_id,name:s.name,bydata:s.bydata||""})}else e.sceneSelectId="",e.$emit("scene",{id:"",name:"",bydata:""});e.sceneList=t.data.list}).catch(function(){e.$emit("scene",{id:"",name:"",bydata:""})})},selectScene:function(e,t){this.sceneSelectId=e.scene_id,this.$emit("scene",{id:e.scene_id,name:e.name,bydata:e.bydata}),this.$emit("hidden-scene")},addScene:function(){this.$emit("scene-handle",{type:"add"})},setScene:function(){this.$emit("scene-handle",{type:"set"})}}},E=(i("YWwE"),Object(b.a)(S,function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"scene-container"},[s("div",{staticClass:"scene-list"},e._l(e.sceneList,function(t,i){return s("div",{key:i,staticClass:"scene-list-item",class:{"scene-list-item-select":t.scene_id==e.sceneSelectId},on:{click:function(s){e.selectScene(t,i)}}},[e._v("\n      "+e._s(t.name)+"\n    ")])})),e._v(" "),s("div",[s("flexbox",{staticClass:"handle-button",nativeOn:{click:function(t){return e.addScene(t)}}},[s("img",{staticClass:"handle-button-icon",attrs:{src:i("5hU7")}}),e._v(" "),s("div",{staticClass:"handle-button-name"},[e._v("新建场景")])]),e._v(" "),s("flexbox",{staticClass:"handle-button",nativeOn:{click:function(t){return e.setScene(t)}}},[s("img",{staticClass:"handle-button-icon",attrs:{src:i("HfS2")}}),e._v(" "),s("div",{staticClass:"handle-button-name"},[e._v("管理")])])],1)])},[],!1,null,"8d57a94c",null));E.options.__file="SceneList.vue";var j=E.exports,N=i("MQ60"),M=i.n(N),O=i("7Qib"),x={name:"scene-create",components:{XhUserCell:v.p},props:{dialogVisible:{type:Boolean,required:!0,default:!1},fieldList:{type:Array,required:!0,default:[]},obj:{default:function(){return{}},required:!0},crmType:{type:String,default:""},name:{type:String,default:""},isDefault:{type:Boolean,default:!1},edit_id:{type:String,default:""}},data:function(){return{form:[],visible:!1,showErrors:!1,saveDefault:!1,saveName:null}},watch:{dialogVisible:{handler:function(e){var t=this;if(e){if(this.edit_id){this.form=[];var i=function(e){var i=t.obj.obj[e],s=t.getItem();if(s.name=i.name,s.field=e,s.condition=i.condition,s.form_type=i.form_type,"date"==i.form_type)s.value=[i.start_date,i.end_date];else if("datetime"==i.form_type)s.value=[Object(O.m)(i.start,"YYYY-MM-DD HH:mm:ss"),Object(O.m)(i.end,"YYYY-MM-DD HH:mm:ss")];else if("business_type"==i.form_type){if(s.type_id=i.type_id,s.status_id=i.status_id,s.typeOption=i.setting,i.type_id){var a=i.setting.find(function(e){return e.type_id===i.type_id});s.statusOption=a?a.statusList:[]}}else"user"==i.form_type?s.value=i.setting?[i.setting]:[]:(s.setting=i.setting,s.value=i.value);t.form.push(s)};for(var s in this.obj.obj)i(s)}else this.form=Object(O.h)(this.obj.form),0==this.form.length&&this.form.push(this.getItem());this.name?this.saveName=this.name:this.saveName="",this.isDefault?this.saveDefault=this.isDefault:this.saveDefault=!1}this.visible=this.dialogVisible},deep:!0,immediate:!0},form:function(){this.$nextTick(function(){var e=document.getElementById("scene-filter-container");e.scrollTop=e.scrollHeight})}},methods:{getItem:function(){return{field:"",name:"",form_type:"",condition:"is",value:"",typeOption:[],statusOption:[],type_id:"",status_id:""}},typeOptionsChange:function(e){if(e.type_id){var t=e.typeOption.find(function(t){return t.type_id===e.type_id});e.statusOption=t.statusList||[]}else e.statusOption=[];e.status_id=""},userValueChange:function(e){e.value.length>0?e.item.value=e.value:e.item.value=[]},calConditionOptions:function(e,t){return"select"==e||"checkbox"==e||"user"==e?[{value:"is",label:"等于",disabled:!1},{value:"isnot",label:"不等于",disabled:!1}]:"module"==e||"text"==e||"textarea"==e?[{value:"is",label:"等于",disabled:!1},{value:"isnot",label:"不等于",disabled:!1},{value:"contains",label:"包含",disabled:!1},{value:"not_contain",label:"不包含",disabled:!1}]:"floatnumber"==e||"number"==e?[{value:"is",label:"等于",disabled:!1},{value:"isnot",label:"不等于",disabled:!1},{value:"contains",label:"包含",disabled:!1},{value:"not_contain",label:"不包含",disabled:!1},{value:"is_empty",label:"为空",disabled:!1},{value:"is_not_empty",label:"不为空",disabled:!1},{value:"gt",label:"大于",disabled:!1},{value:"egt",label:"大于等于",disabled:!1},{value:"lt",label:"小于",disabled:!1},{value:"elt",label:"小于等于",disabled:!1}]:"category"==e?[{value:"is",label:"等于",disabled:!1},{value:"isnot",label:"不等于",disabled:!1},{value:"contains",label:"包含",disabled:!1},{value:"not_contain",label:"不包含",disabled:!1}]:[{value:"is",label:"等于",disabled:!1},{value:"isnot",label:"不等于",disabled:!1},{value:"contains",label:"包含",disabled:!1},{value:"not_contain",label:"不包含",disabled:!1},{value:"start_with",label:"开始于",disabled:!1},{value:"end_with",label:"结束于",disabled:!1},{value:"is_empty",label:"为空",disabled:!1},{value:"is_not_empty",label:"不为空",disabled:!1},{value:"gt",label:"大于",disabled:!1},{value:"egt",label:"大于等于",disabled:!1},{value:"lt",label:"小于",disabled:!1},{value:"elt",label:"小于等于",disabled:!1}]},fieldChange:function(e){var t=this.fieldList.find(function(t){return t.field===e.field});t&&(e.form_type=t.form_type,e.name=t.name,"business_type"==e.form_type?(e.typeOption=t.setting,e.statusOption=[],e.type_id="",e.status_id=""):"select"==e.form_type?e.setting=t.setting||[]:"date"!==e.form_type&&"datetime"!==e.form_type&&"user"!==e.form_type||(e.value=[])),this.form.filter(function(t){return t.field===e.field}).length>1?this.showErrors=!0:this.showErrors=!1},handleCancel:function(){this.visible=!1,this.$emit("update:dialogVisible",!1)},handleConfirm:function(){if(this.showErrors)this.$message.error("筛选条件中有重复项！");else if(this.saveName&&""!==this.saveName){for(var e=0;e<this.form.length;e++){var t=this.form[e];if(!t.field||""===t.field)return void this.$message.error("要筛选的字段名称不能为空！");if("business_type"==t.form_type){if(!t.type_id&&!t.status_id)return void this.$message.error("请输入筛选条件的值！")}else if("date"==t.form_type||"datetime"==t.form_type||"user"==t.form_type){if(!t.value||0===t.value.length)return void this.$message.error("请输入筛选条件的值！")}else if(!t.value)return void this.$message.error("请输入筛选条件的值！")}var i={};this.form.forEach(function(e){"date"==e.form_type?i[e.field]={start_date:e.value[0],end_date:e.value[1],form_type:e.form_type,name:e.name}:"datetime"==e.form_type?i[e.field]={start:Object(O.d)(e.value[0]),end:Object(O.d)(e.value[1]),form_type:e.form_type,name:e.name}:"business_type"==e.form_type?i[e.field]={type_id:e.type_id,status_id:e.status_id,form_type:e.form_type,name:e.name}:"user"==e.form_type?i[e.field]={condition:e.condition,value:e.value[0].id,form_type:e.form_type,name:e.name}:i[e.field]={condition:e.condition,value:e.value,form_type:e.form_type,name:e.name}});var s={obj:i,form:this.form,saveDefault:this.saveDefault,saveName:this.saveName};this.requestCreateScene(s)}else this.$message.error("场景名称不能为空！")},requestCreateScene:function(e){var t=this;this.edit_id?Object(p.r)({types:"crm_"+this.crmType,is_default:e.saveDefault?1:0,name:e.saveName,id:this.edit_id,data:e.obj}).then(function(e){t.$message({type:"success",message:"编辑成功"}),t.$emit("saveSuccess"),t.handleCancel()}).catch(function(){}):Object(p.p)({types:"crm_"+this.crmType,is_default:e.saveDefault?1:0,name:e.saveName,data:e.obj}).then(function(e){t.$message({type:"success",message:"创建成功"}),t.$emit("saveSuccess"),t.handleCancel()}).catch(function(){})},handleAdd:function(){this.form.push(this.getItem())},handleDelete:function(e){var t=this;this.$confirm("您确定要删除这一条数据吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.form.splice(e,1)}).catch(function(){t.$message({type:"info",message:"已取消删除"})})}}},G=(i("Ny23"),Object(b.a)(x,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:e.edit_id?"编辑场景":"新建场景",visible:e.visible,"append-to-body":!0,width:"800px"},on:{"update:visible":function(t){e.visible=t},close:e.handleCancel}},[i("div",{staticClass:"scene-name-container"},[i("div",{staticClass:"scene-name"},[e._v("场景名称")]),e._v(" "),i("el-input",{staticClass:"scene-input",attrs:{maxlength:10,placeholder:"请输入场景名称，最多10个字符"},model:{value:e.saveName,callback:function(t){e.saveName="string"==typeof t?t.trim():t},expression:"saveName"}})],1),e._v(" "),i("div",{staticClass:"scene-name"},[e._v("筛选条件")]),e._v(" "),i("el-form",{staticClass:"filter-container",attrs:{id:"scene-filter-container"}},[i("el-form-item",[e._l(e.form,function(t,s){return[i("el-row",{key:s},[i("el-col",{attrs:{span:8}},[i("el-select",{attrs:{placeholder:"请选择要筛选的字段名"},on:{change:function(i){e.fieldChange(t)}},model:{value:t.field,callback:function(i){e.$set(t,"field",i)},expression:"formItem.field"}},e._l(e.fieldList,function(e){return i("el-option",{key:e.field,attrs:{label:e.name,value:e.field}})}))],1),e._v(" "),"date"!==t.form_type&&"datetime"!==t.form_type&&"business_type"!==t.form_type?i("el-col",{attrs:{span:1}},[e._v(" ")]):e._e(),e._v(" "),"date"!==t.form_type&&"datetime"!==t.form_type&&"business_type"!==t.form_type?i("el-col",{attrs:{span:4}},[i("el-select",{attrs:{placeholder:"请选择范围"},model:{value:t.condition,callback:function(i){e.$set(t,"condition",i)},expression:"formItem.condition"}},e._l(e.calConditionOptions(t.form_type,t),function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1):e._e(),e._v(" "),"business_type"==t.form_type?i("el-col",{attrs:{span:1}},[e._v(" ")]):e._e(),e._v(" "),"business_type"==t.form_type?i("el-col",{attrs:{span:4}},[i("el-select",{attrs:{placeholder:"请选择"},on:{change:function(i){e.typeOptionsChange(t)}},model:{value:t.type_id,callback:function(i){e.$set(t,"type_id",i)},expression:"formItem.type_id"}},e._l(t.typeOption,function(e){return i("el-option",{key:e.type_id,attrs:{label:e.name,value:e.type_id}})}))],1):e._e(),e._v(" "),i("el-col",{attrs:{span:1}},[e._v(" ")]),e._v(" "),i("el-col",{attrs:{span:"datetime"===t.form_type||"date"===t.form_type?13:8}},["select"===t.form_type?i("el-select",{attrs:{placeholder:"请选择筛选条件"},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"formItem.value"}},e._l(t.setting,function(e){return i("el-option",{key:e,attrs:{label:e,value:e}})})):"date"===t.form_type||"datetime"===t.form_type?i("el-date-picker",{staticStyle:{padding:"0px 10px"},attrs:{"value-format":"date"===t.form_type?"yyyy-MM-dd":"yyyy-MM-dd HH:mm:ss",type:"date"===t.form_type?"daterange":"datetimerange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"formItem.value"}}):"business_type"===t.form_type?i("el-select",{attrs:{placeholder:"请选择"},model:{value:t.status_id,callback:function(i){e.$set(t,"status_id",i)},expression:"formItem.status_id"}},e._l(t.statusOption,function(e){return i("el-option",{key:e.status_id,attrs:{label:e.name,value:e.status_id}})})):"user"===t.form_type?i("xh-user-cell",{attrs:{item:t,infoParams:{m:"crm",c:e.crmType,a:"index"},value:t.value},on:{"value-change":e.userValueChange}}):i("el-input",{attrs:{placeholder:"请输入筛选条件"},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"formItem.value"}})],1),e._v(" "),i("el-col",{staticClass:"delete",attrs:{span:1}},[i("i",{staticClass:"el-icon-error delete-btn",on:{click:function(t){e.handleDelete(s)}}})])],1)]})],2)],1),e._v(" "),i("p",{directives:[{name:"show",rawName:"v-show",value:e.showErrors,expression:"showErrors"}],staticClass:"el-icon-warning warning-info"},[i("span",{staticClass:"desc"},[e._v("筛选条件中有重复项！")])]),e._v(" "),i("el-button",{attrs:{type:"text"},on:{click:e.handleAdd}},[e._v("+ 添加筛选条件")]),e._v(" "),i("div",{staticClass:"save"},[i("div",{staticClass:"save-setting"},[i("el-checkbox",{model:{value:e.saveDefault,callback:function(t){e.saveDefault=t},expression:"saveDefault"}},[e._v("设置为默认")])],1)]),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.handleCancel}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.handleConfirm}},[e._v("确 定")])],1)],1)},[],!1,null,"784c79b6",null));G.options.__file="SceneCreate.vue";var L=G.exports,B={name:"scene-set",components:{draggable:M.a,SceneCreate:L},computed:{},data:function(){return{default_id:"",visible:!1,isleftIndeterminate:!1,checkleftAll:!1,checkedLeftData:[],leftCheckItems:[],isrightIndeterminate:!1,checkrightAll:!1,checkedRightData:[],rightCheckItems:[],moveItem:{},handlDefaultItem:{},showCreateScene:!1,fieldList:[],filterObj:{form:[]},filterName:"",filterDefault:!1,filterEditId:""}},watch:{dialogVisible:{handler:function(e){this.visible=e,e&&this.getSceneList()},deep:!0,immediate:!0}},props:{dialogVisible:{type:Boolean,required:!0,default:!1},crmType:{type:String,default:""}},mounted:function(){},methods:{getSceneList:function(){var e=this;Object(p.o)({types:"crm_"+this.crmType}).then(function(t){e.checkedLeftData=t.data.list.map(function(e,t){return e.check=!1,e}),e.checkedRightData=t.data.hideList.map(function(e,t){return e.check=!1,e});var i=e.checkedLeftData.filter(function(e,t){return 1==e.is_default});i&&i.length>0?e.default_id=i[0].scene_id:e.default_id=""}).catch(function(){})},handleConfirm:function(){var e=this,t=this;0==this.checkedLeftData.filter(function(e,i){return e.scene_id==t.default_id}).length&&(this.default_id=""),Object(p.q)({types:"crm_"+this.crmType,ids:this.checkedLeftData.map(function(e,t,i){return e.scene_id}),hide_ids:this.checkedRightData.map(function(e,t,i){return e.scene_id}),default_id:this.default_id}).then(function(t){e.$message({type:"success",message:"操作成功"}),e.handleCancel(),e.$emit("save-success")}).catch(function(){})},itemHandle:function(e,t,i){var s=this;"edit"==e?this.addAndEditScene("edit",t):"delete"==e?this.$confirm("您确定要删除这一条数据吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(p.n)({id:t.scene_id}).then(function(e){s.$message({type:"success",message:"删除成功"}),s.checkedLeftData.splice(i,1),s.leftCheckItemChange(),s.$emit("save-success")}).catch(function(){})}).catch(function(){s.$message({type:"info",message:"已取消删除"})}):"default"==e&&(this.handlDefaultItem=t)},defaultHandle:function(){var e=this;Object(p.m)({id:this.handlDefaultItem.scene_id,types:"crm_"+this.crmType}).then(function(t){e.$message({type:"success",message:t.data}),e.default_id=e.handlDefaultItem.scene_id}).catch(function(){})},addAndEditScene:function(e,t){var i=this;Object(p.x)({types:"crm_"+this.crmType}).then(function(s){i.fieldList=s.data,"edit"==e?(i.filterObj={form:[],obj:t.data},i.filterName=t.name,i.filterDefault=1==t.is_default,i.filterEditId=t.scene_id.toString()):(i.filterObj={form:[]},i.filterEditId="",i.filterName="",i.filterDefault=!1),i.showCreateScene=!0}).catch(function(){})},handleCancel:function(){this.visible=!1,this.$emit("update:dialogVisible",!1)},rightMoveEnd:function(e){this.moveItem.check=!1,this.leftCheckItemChange(),this.rightCheckItemChange()},rightMove:function(e){this.moveItem=e.draggedContext.element},leftMoveEnd:function(e){this.moveItem.check=!1,this.leftCheckItemChange(),this.rightCheckItemChange()},leftMove:function(e){this.moveItem=e.draggedContext.element},handleleftCheckAllChange:function(e){e&&(this.isleftIndeterminate=!1),this.checkedLeftData=this.checkedLeftData.filter(function(t,i,s){return t.check=e,t}),this.leftCheckItems=e?this.checkedLeftData:[]},leftCheckItemChange:function(){this.leftCheckItems=this.checkedLeftData.filter(function(e,t,i){return 1==e.check}),this.leftCheckItems.length>0?this.leftCheckItems.length==this.checkedLeftData.length?(this.checkleftAll=!0,this.isleftIndeterminate=!1):(this.checkleftAll=!1,this.isleftIndeterminate=!0):(this.checkleftAll=!1,this.isleftIndeterminate=!1)},handlerightCheckAllChange:function(e){e&&(this.isrightIndeterminate=!1),this.checkedRightData=this.checkedRightData.filter(function(t,i,s){return t.check=e,t}),this.rightCheckItems=e?this.checkedRightData:[]},rightCheckItemChange:function(){this.rightCheckItems=this.checkedRightData.filter(function(e,t,i){return 1==e.check}),this.rightCheckItems.length>0?this.rightCheckItems.length==this.checkedRightData.length?(this.checkrightAll=!0,this.isrightIndeterminate=!1):(this.checkrightAll=!1,this.isrightIndeterminate=!0):(this.checkrightAll=!1,this.isrightIndeterminate=!1)},changePositon:function(e){var t=this;"left"==e?(this.checkedRightData=this.checkedRightData.filter(function(e,i,s){var a=!1;return t.rightCheckItems.forEach(function(t,i){e.scene_id==t.scene_id&&(a=!0)}),!a}),this.rightCheckItems.forEach(function(e,i){e.check=!1,t.checkedLeftData.push(e)}),this.rightCheckItems=[],this.isrightIndeterminate=!1,this.checkrightAll=!1,this.leftCheckItemChange(),this.rightCheckItemChange()):(this.checkedLeftData=this.checkedLeftData.filter(function(e,i,s){var a=!1;return t.leftCheckItems.forEach(function(t,i){e.scene_id==t.scene_id&&(a=!0)}),!a}),this.leftCheckItems.forEach(function(e,i){e.check=!1,t.checkedRightData.push(e)}),this.leftCheckItems=[],this.isleftIndeterminate=!1,this.checkleftAll=!1,this.leftCheckItemChange(),this.rightCheckItemChange())}}},Z=(i("6Aus"),Object(b.a)(B,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:"场景管理",visible:e.visible,"append-to-body":!0,width:"700px"},on:{"update:visible":function(t){e.visible=t},close:e.handleCancel}},[i("div",{staticClass:"scene-name"},[e._v("您可通过拖拽管理标签")]),e._v(" "),i("flexbox",{staticClass:"scene-list"},[i("div",{staticClass:"scene-list-box"},[i("flexbox",{staticClass:"scene-list-head"},[i("el-checkbox",{attrs:{indeterminate:e.isleftIndeterminate},on:{change:e.handleleftCheckAllChange},model:{value:e.checkleftAll,callback:function(t){e.checkleftAll=t},expression:"checkleftAll"}}),e._v(" "),i("div",{staticClass:"scene-list-head-name"},[e._v("显示的标签")]),e._v(" "),i("div",{staticClass:"scene-list-head-detail"},[e._v(e._s(e.leftCheckItems.length+"/"+e.checkedLeftData.length))])],1),e._v(" "),i("div",{staticClass:"scene-list-body"},[e._l(e.checkedLeftData,function(t,s){return 1==t.type?i("flexbox",{key:s,staticClass:"list-item"},[i("div",{staticClass:"default-mark",class:{"default-mark-active":t.scene_id==e.default_id}}),e._v(" "),i("el-checkbox",{staticClass:"list-item-check",attrs:{disabled:!0},on:{change:e.leftCheckItemChange},model:{value:t.check,callback:function(i){e.$set(t,"check",i)},expression:"item.check"}}),e._v(" "),i("div",{staticClass:"list-item-name"},[e._v(e._s(t.name))]),e._v(" "),i("div",{staticClass:"list-item-handle"},[i("el-dropdown",{attrs:{trigger:"click"},on:{command:e.defaultHandle}},[i("i",{staticClass:"el-icon-arrow-down",on:{click:function(i){e.itemHandle("default",t,s)}}}),e._v(" "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",[e._v("设置为默认标签")])],1)],1)],1)],1):e._e()}),e._v(" "),i("draggable",{staticStyle:{"min-height":"100px"},attrs:{move:e.leftMove,options:{group:"list",forceFallback:!1,fallbackClass:"draggingStyle"}},on:{end:e.leftMoveEnd},model:{value:e.checkedLeftData,callback:function(t){e.checkedLeftData=t},expression:"checkedLeftData"}},e._l(e.checkedLeftData,function(t,s){return 1!=t.type?i("flexbox",{key:s,staticClass:"list-item"},[i("div",{staticClass:"default-mark",class:{"default-mark-active":t.scene_id==e.default_id}}),e._v(" "),i("el-checkbox",{staticClass:"list-item-check",on:{change:e.leftCheckItemChange},model:{value:t.check,callback:function(i){e.$set(t,"check",i)},expression:"item.check"}}),e._v(" "),i("div",{staticClass:"list-item-name"},[e._v(e._s(t.name))]),e._v(" "),i("div",{staticClass:"list-item-handle"},[i("i",{staticClass:"el-icon-edit",on:{click:function(i){e.itemHandle("edit",t,s)}}}),e._v(" "),i("i",{staticClass:"el-icon-delete",on:{click:function(i){e.itemHandle("delete",t,s)}}}),e._v(" "),i("el-dropdown",{on:{command:e.defaultHandle}},[i("i",{staticClass:"el-icon-arrow-down",on:{click:function(i){e.itemHandle("default",t,s)}}}),e._v(" "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",[e._v("设置为默认标签")])],1)],1)],1)],1):e._e()}))],2)],1),e._v(" "),i("div",{staticClass:"scene-middle-list"},[i("el-button",{staticClass:"scene-middle-left-button",class:{"scene-middle-button-select":e.rightCheckItems.length>0},attrs:{disabled:0==e.rightCheckItems.length},on:{click:function(t){e.changePositon("left")}}},[i("i",{staticClass:"el-icon-arrow-left scene-middle-icon"})]),e._v(" "),i("el-button",{staticClass:"scene-middle-right-button",class:{"scene-middle-button-select":e.leftCheckItems.length>0},attrs:{disabled:0==e.leftCheckItems.length},on:{click:function(t){e.changePositon("right")}}},[i("i",{staticClass:"el-icon-arrow-right scene-middle-icon"})])],1),e._v(" "),i("div",{staticClass:"scene-list-box"},[i("flexbox",{staticClass:"scene-list-head"},[i("el-checkbox",{attrs:{indeterminate:e.isrightIndeterminate},on:{change:e.handlerightCheckAllChange},model:{value:e.checkrightAll,callback:function(t){e.checkrightAll=t},expression:"checkrightAll"}}),e._v(" "),i("div",{staticClass:"scene-list-head-name"},[e._v("隐藏的标签")]),e._v(" "),i("div",{staticClass:"scene-list-head-detail"},[e._v(e._s(e.rightCheckItems.length+"/"+e.checkedRightData.length))])],1),e._v(" "),i("div",{staticClass:"scene-list-body"},[i("draggable",{staticStyle:{"min-height":"100px"},attrs:{move:e.rightMove,options:{group:"list",forceFallback:!1,fallbackClass:"draggingStyle"}},on:{end:e.rightMoveEnd},model:{value:e.checkedRightData,callback:function(t){e.checkedRightData=t},expression:"checkedRightData"}},e._l(e.checkedRightData,function(t,s){return i("flexbox",{key:s,staticClass:"list-item"},[i("el-checkbox",{staticClass:"list-item-check",staticStyle:{"margin-left":"9px"},on:{change:e.rightCheckItemChange},model:{value:t.check,callback:function(i){e.$set(t,"check",i)},expression:"item.check"}}),e._v(" "),i("div",{staticClass:"list-item-name"},[e._v(e._s(t.name))])],1)}))],1)],1)]),e._v(" "),i("div",{staticClass:"handle-bar"},[i("div",{staticClass:"handle-bar-add",on:{click:function(t){e.addAndEditScene("add",{})}}},[e._v("+ 新建场景")]),e._v(" "),i("div",{staticClass:"handle-bar-save"},[i("el-button",{nativeOn:{click:function(t){return e.handleCancel(t)}}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.handleConfirm(t)}}},[e._v("保存")])],1)]),e._v(" "),i("scene-create",{attrs:{fieldList:e.fieldList,crmType:e.crmType,dialogVisible:e.showCreateScene,obj:e.filterObj,name:e.filterName,edit_id:e.filterEditId,isDefault:e.filterDefault},on:{"update:dialogVisible":function(t){e.showCreateScene=t},saveSuccess:e.getSceneList}})],1)},[],!1,null,"2d1ecf66",null));Z.options.__file="SceneSet.vue";var Y=Z.exports,U=i("QY39"),F=i("eOzp"),z=i("V47a"),V={name:"CRM-table-head",components:{filterForm:R.a,filterContent:T.a,SceneList:j,TransferHandle:U.a,TeamsHandle:F.a,AllocHandle:z.a,SceneCreate:L,SceneSet:Y},computed:l()({},Object(c.b)(["crm","CRMConfig"])),data:function(){return{sceneTypes:[{type:"enter",name:"我负责的"},{type:"out",name:"我"}],sceneType:null,showScene:!1,showFilter:!1,fieldList:[],filterObj:{form:[]},sceneData:{id:"",bydata:"",name:""},showSceneSet:!1,showSceneCreate:!1,sceneFilterObj:{form:[]},selectionList:[],transferDialogShow:!1,teamsDialogShow:!1,teamsTitle:"",allocDialogShow:!1}},watch:{},props:{title:{type:String,default:""},crmType:{type:String,default:""},isSeas:{type:Boolean,default:!1}},mounted:function(){},methods:{handleTypeDrop:function(e){this.sceneType=e},showFilterClick:function(){this.getFilterFieldInfo()},getFilterFieldInfo:function(){var e=this;Object(p.x)({types:"crm_"+this.crmType}).then(function(t){e.fieldList=t.data,e.showFilter=!0}).catch(function(){})},handleFilter:function(e){var t=this;this.filterObj=e,this.showFilter=!1,e.saveChecked&&Object(p.p)({types:"crm_"+this.crmType,is_default:e.saveDefault?1:0,name:e.saveName,data:e.obj}).then(function(e){t.updateSceneList()}).catch(function(){}),this.$emit("filter",e.obj)},handleDeleteField:function(e){this.filterObj=e.obj,this.$emit("filter",this.filterObj.obj)},sceneSelect:function(e){this.sceneData=e,this.$emit("scene",e)},sceneHandle:function(e){var t=this;"set"==e.type?this.showSceneSet=!0:"add"==e.type&&Object(p.x)({types:"crm_"+this.crmType}).then(function(e){t.fieldList=e.data,t.showSceneCreate=!0}).catch(function(){})},updateSceneList:function(){this.$refs.sceneList.getSceneList()},headSelectionChange:function(e){this.selectionList=e},selectionBarClick:function(e){var t=this;if("transfer"==e)this.transferDialogShow=!0;else if("export"==e){var i={scene_id:this.scene_id},s=void 0;s=this.isSeas?h.i:{customer:h.d,leads:u.c,contacts:m.c,product:f.b}[this.crmType],i[this.crmType+"_id"]=this.selectionList.map(function(e){return e[t.crmType+"_id"]}),s(i).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"}),i=document.createElement("a"),s=window.URL.createObjectURL(t);i.href=s,i.download=decodeURI(e.headers["content-disposition"].split("filename=")[1])||"",document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(s)}).catch(function(){})}else if("transform"==e||"put_seas"==e||"delete"==e||"lock"==e||"unlock"==e||"start"==e||"disable"==e||"get"==e){var a="";"transform"==e?a="确定将这些线索转换为客户吗?":"put_seas"==e?a="确定转移到公海吗?":"delete"==e?a="确定要删除这些数据吗?":"lock"==e?a="确定要锁定这些客户吗？锁定后将不会掉入公海。":"unlock"==e?a="确定要解锁这些客户吗？":"start"==e?a="确定要上架这些产品吗?":"disable"==e?a="确定要下架这些产品吗?":"get"==e&&(a="确定要领取该客户吗?"),this.$confirm(a,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.confirmHandle(e)}).catch(function(){t.$message({type:"info",message:"已取消操作"})})}else"add_user"==e?(this.teamsTitle="添加团队成员",this.teamsDialogShow=!0):"delete_user"==e?(this.teamsTitle="移除团队成员",this.teamsDialogShow=!0):"alloc"==e&&(this.allocDialogShow=!0)},confirmHandle:function(e){var t=this;if("lock"===e||"unlock"===e){var i=this.selectionList.map(function(e,t,i){return e.customer_id});Object(h.g)({is_lock:"lock"===e?"1":"2",customer_id:i}).then(function(i){t.$message({type:"success",message:i.data}),t.$emit("handle",{type:e})}).catch(function(){})}else if("put_seas"===e){i=this.selectionList.map(function(e,t,i){return e.customer_id});Object(h.j)({customer_id:i}).then(function(i){t.$message({type:"success",message:i.data}),t.$emit("handle",{type:e})}).catch(function(){})}else if("transform"===e){var s=this.selectionList.map(function(e,t,i){return e.leads_id});Object(u.j)({leads_id:s}).then(function(i){t.$message({type:"success",message:i.data}),t.$emit("handle",{type:e})}).catch(function(){})}else if("start"===e||"disable"===e){var a=this.selectionList.map(function(e,t,i){return e.product_id});Object(f.g)({id:a,status:"start"===e?"上架":"下架"}).then(function(i){t.$message({type:"success",message:i.data}),t.$emit("handle",{type:e})}).catch(function(){})}else if("delete"===e){var n=this,l=this.selectionList.map(function(e,t,i){return e[n.crmType+"_id"]}),c=void 0;"leads"==this.crmType?c=u.a:"customer"==this.crmType?c=h.a:"contacts"==this.crmType?c=m.a:"business"==this.crmType?c=A.b:"contract"==this.crmType?c=w.b:"receivables"==this.crmType&&(c=D.b),c({id:l}).then(function(i){t.$message({type:"success",message:i.data}),t.$emit("handle",{type:e})}).catch(function(){})}else if("get"===e){i=this.selectionList.map(function(e,t,i){return e.customer_id});Object(h.l)({customer_id:i}).then(function(i){t.$message({type:"success",message:i.data}),t.$emit("handle",{type:e})}).catch(function(){})}},getSelectionHandleItemsInfo:function(){var e={transfer:{name:"转移",type:"transfer",icon:i("W1y5")},transform:{name:"转化为客户",type:"transform",icon:i("rvIm")},export:{name:"导出选中",type:"export",icon:i("bwvB")},delete:{name:"删除",type:"delete",icon:i("NKOo")},put_seas:{name:"放入公海",type:"put_seas",icon:i("tmjI")},lock:{name:"锁定",type:"lock",icon:i("lYrD")},unlock:{name:"解锁",type:"unlock",icon:i("4N2P")},add_user:{name:"添加团队成员",type:"add_user",icon:i("jJjR")},delete_user:{name:"移除团队成员",type:"delete_user",icon:i("svWA")},alloc:{name:"分配",type:"alloc",icon:i("aQEv")},get:{name:"领取",type:"get",icon:i("lF6w")},start:{name:"上架",type:"start",icon:i("yTN1")},disable:{name:"下架",type:"disable",icon:i("disj")}};return"leads"==this.crmType?this.forSelectionHandleItems(e,["transfer","transform","export","delete"]):"customer"==this.crmType?this.isSeas?this.forSelectionHandleItems(e,["alloc","get","export"]):this.forSelectionHandleItems(e,["transfer","export","put_seas","delete","lock","unlock","add_user","delete_user"]):"contacts"==this.crmType?this.forSelectionHandleItems(e,["transfer","export","delete"]):"business"==this.crmType?this.forSelectionHandleItems(e,["transfer","delete","add_user","delete_user"]):"contract"==this.crmType?this.forSelectionHandleItems(e,["transfer","delete","add_user","delete_user"]):"receivables"==this.crmType?this.forSelectionHandleItems(e,["delete"]):"product"==this.crmType?this.forSelectionHandleItems(e,["export","start","disable"]):void 0},forSelectionHandleItems:function(e,t){for(var i=[],s=0;s<t.length;s++){var a=t[s];this.whetherTypeShowByPermision(a)&&i.push(e[a])}return i},whetherTypeShowByPermision:function(e){return"transfer"==e?"is_transform"!=this.sceneData.bydata&&this.crm[this.crmType].transfer:"transform"==e?"is_transform"!=this.sceneData.bydata&&this.crm[this.crmType].transform:"export"==e?this.isSeas?this.crm[this.crmType].poolexcelexport:this.crm[this.crmType].excelexport:"delete"==e?this.crm[this.crmType].delete:"put_seas"==e?this.crm[this.crmType].putinpool:"lock"==e||"unlock"==e?this.crm[this.crmType].lock&&1==this.CRMConfig.config:"add_user"==e||"delete_user"==e?this.crm[this.crmType].teamsave:"alloc"==e?this.crm[this.crmType].distribute:"get"==e?this.crm[this.crmType].receive:"start"!=e&&"disable"!=e||this.crm[this.crmType].status},handleCallBack:function(e){this.$emit("handle",{type:e.type})},getDefaultSceneName:function(){return"leads"==this.crmType?"全部线索":"customer"==this.crmType?"全部客户":"contacts"==this.crmType?"全部联系人":"business"==this.crmType?"全部商机":"contract"==this.crmType?"全部合同":"receivables"==this.crmType?"全部回款":"product"==this.crmType?"全部产品":void 0}}},H=(i("bec2"),Object(b.a)(V,function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("flexbox",{directives:[{name:"show",rawName:"v-show",value:0==e.selectionList.length,expression:"selectionList.length == 0"}],staticClass:"th-container"},[e.isSeas?e._e():s("div",[e._v("场景：")]),e._v(" "),e.isSeas?e._e():s("el-popover",{attrs:{trigger:"click","popper-class":"no-padding-popover",width:"150"},model:{value:e.showScene,callback:function(t){e.showScene=t},expression:"showScene"}},[s("flexbox",{attrs:{slot:"reference"},slot:"reference"},[s("div",{staticClass:"condition_title"},[e._v(e._s(e.sceneData.name||e.getDefaultSceneName()))]),e._v(" "),s("i",{staticClass:"el-icon-arrow-down el-icon--right",staticStyle:{color:"#777"}})]),e._v(" "),s("scene-list",{ref:"sceneList",attrs:{crmType:e.crmType},on:{scene:e.sceneSelect,"scene-handle":e.sceneHandle,"hidden-scene":function(t){e.showScene=!1}}})],1),e._v(" "),s("img",{staticClass:"c-filtrate",style:{"margin-left":e.isSeas?0:"30px"},attrs:{src:i("3gs7")},on:{click:e.showFilterClick}}),e._v(" "),s("div",{staticClass:"condition_title",on:{click:e.showFilterClick}},[e._v("高级筛选")]),e._v(" "),s("filter-form",{attrs:{fieldList:e.fieldList,dialogVisible:e.showFilter,obj:e.filterObj,crmType:e.crmType,isSeas:e.isSeas},on:{"update:dialogVisible":function(t){e.showFilter=t},filter:e.handleFilter}})],1),e._v(" "),e.selectionList.length>0?s("flexbox",{staticClass:"selection-bar"},[s("div",{staticClass:"selected—title"},[e._v("已选中"),s("span",{staticClass:"selected—count"},[e._v(e._s(e.selectionList.length))]),e._v("项")]),e._v(" "),s("flexbox",{staticClass:"selection-items-box"},e._l(e.getSelectionHandleItemsInfo(),function(t,i){return s("flexbox",{key:i,staticClass:"selection-item",nativeOn:{click:function(i){e.selectionBarClick(t.type)}}},[s("img",{staticClass:"selection-item-icon",attrs:{src:t.icon}}),e._v(" "),s("div",{staticClass:"selection-item-name"},[e._v(e._s(t.name))])])}))],1):e._e(),e._v(" "),e.filterObj.form&&e.filterObj.form.length>0?s("filter-content",{attrs:{obj:e.filterObj},on:{delete:e.handleDeleteField}}):e._e(),e._v(" "),s("transfer-handle",{attrs:{crmType:e.crmType,selectionList:e.selectionList,dialogVisible:e.transferDialogShow},on:{handle:e.handleCallBack,"update:dialogVisible":function(t){e.transferDialogShow=t}}}),e._v(" "),s("teams-handle",{attrs:{crmType:e.crmType,title:e.teamsTitle,selectionList:e.selectionList,dialogVisible:e.teamsDialogShow},on:{handle:e.handleCallBack,"update:dialogVisible":function(t){e.teamsDialogShow=t}}}),e._v(" "),s("alloc-handle",{attrs:{crmType:e.crmType,selectionList:e.selectionList,dialogVisible:e.allocDialogShow},on:{handle:e.handleCallBack,"update:dialogVisible":function(t){e.allocDialogShow=t}}}),e._v(" "),s("scene-set",{attrs:{dialogVisible:e.showSceneSet,crmType:e.crmType},on:{"update:dialogVisible":function(t){e.showSceneSet=t},"save-success":e.updateSceneList}}),e._v(" "),s("scene-create",{attrs:{fieldList:e.fieldList,crmType:e.crmType,dialogVisible:e.showSceneCreate,obj:e.sceneFilterObj},on:{"update:dialogVisible":function(t){e.showSceneCreate=t},saveSuccess:e.updateSceneList}})],1)},[],!1,null,"d0a6ec3c",null));H.options.__file="CRMTableHead.vue";var J=H.exports,Q={name:"fields-set",components:{draggable:M.a},computed:{},data:function(){return{visible:!1,isleftIndeterminate:!1,checkleftAll:!1,leftInput:"",checkedLeftData:[],leftCheckItems:[],isrightIndeterminate:!1,checkrightAll:!1,rightInput:"",checkedRightData:[],rightCheckItems:[],moveItem:{},handlDefaultItem:{}}},watch:{dialogVisible:{handler:function(e){this.visible=e,e&&0==this.checkedLeftData.length&&0==this.checkedRightData.length&&this.getFieldConfigIndex()},deep:!0,immediate:!0}},props:{dialogVisible:{type:Boolean,required:!0,default:!1},crmType:{type:String,default:""},isSeas:{type:Boolean,default:!1}},mounted:function(){document.body.ondrop=function(e){e.preventDefault(),e.stopPropagation()}},methods:{getFieldConfigIndex:function(){var e=this,t="crm_"+this.crmType;this.isSeas&&(t+="_pool"),Object(p.g)({types:t}).then(function(t){e.checkedLeftData=t.data.value_list.map(function(e,t){return e.check=!1,e.show=!0,e}),e.checkedRightData=t.data.hide_list.map(function(e,t){return e.check=!1,e.show=!0,e})}).catch(function(){})},inputLeftChange:function(e){this.checkedLeftData=this.checkedLeftData.map(function(t,i){return-1!=t.name.indexOf(e)?t.show=!0:t.show=!1,t})},inputRightChange:function(e){this.checkedRightData=this.checkedRightData.map(function(t,i){return-1!=t.name.indexOf(e)?t.show=!0:t.show=!1,t})},handleConfirm:function(){var e=this;if(this.checkedLeftData.length<2)this.$message.error("至少要显示两列");else{var t="crm_"+this.crmType;this.isSeas&&(t+="_pool"),Object(p.f)({types:t,value:this.checkedLeftData,hide_value:this.checkedRightData}).then(function(t){e.$message.success(t.data),e.$emit("set-success"),e.handleCancel()}).catch(function(){})}},handleCancel:function(){this.visible=!1,this.$emit("update:dialogVisible",!1)},rightMoveEnd:function(e){this.moveItem.check=!1,this.leftCheckItemChange(),this.rightCheckItemChange()},rightMove:function(e){this.moveItem=e.draggedContext.element},leftMoveEnd:function(e){this.moveItem.check=!1,this.leftCheckItemChange(),this.rightCheckItemChange()},leftMove:function(e){this.moveItem=e.draggedContext.element},handleleftCheckAllChange:function(e){e&&(this.isleftIndeterminate=!1),this.checkedLeftData=this.checkedLeftData.filter(function(t,i,s){return t.check=e,t}),this.leftCheckItems=e?this.checkedLeftData:[]},leftCheckItemChange:function(){this.leftCheckItems=this.checkedLeftData.filter(function(e,t,i){return 1==e.check}),this.leftCheckItems.length>0?this.leftCheckItems.length==this.checkedLeftData.length?(this.checkleftAll=!0,this.isleftIndeterminate=!1):(this.checkleftAll=!1,this.isleftIndeterminate=!0):(this.checkleftAll=!1,this.isleftIndeterminate=!1)},handlerightCheckAllChange:function(e){e&&(this.isrightIndeterminate=!1),this.checkedRightData=this.checkedRightData.filter(function(t,i,s){return t.check=e,t}),this.rightCheckItems=e?this.checkedRightData:[]},rightCheckItemChange:function(){this.rightCheckItems=this.checkedRightData.filter(function(e,t,i){return 1==e.check}),this.rightCheckItems.length>0?this.rightCheckItems.length==this.checkedRightData.length?(this.checkrightAll=!0,this.isrightIndeterminate=!1):(this.checkrightAll=!1,this.isrightIndeterminate=!0):(this.checkrightAll=!1,this.isrightIndeterminate=!1)},changePositon:function(e){var t=this;"left"==e?(this.checkedRightData=this.checkedRightData.filter(function(e,i,s){var a=!1;return t.rightCheckItems.forEach(function(t,i){e.field==t.field&&(a=!0)}),!a}),this.rightCheckItems.forEach(function(e,i){e.check=!1,t.checkedLeftData.push(e)}),this.rightCheckItems=[],this.isrightIndeterminate=!1,this.checkrightAll=!1,this.leftCheckItemChange(),this.rightCheckItemChange()):(this.checkedLeftData=this.checkedLeftData.filter(function(e,i,s){var a=!1;return t.leftCheckItems.forEach(function(t,i){e.field==t.field&&(a=!0)}),!a}),this.leftCheckItems.forEach(function(e,i){e.check=!1,t.checkedRightData.push(e)}),this.leftCheckItems=[],this.isleftIndeterminate=!1,this.checkleftAll=!1,this.leftCheckItemChange(),this.rightCheckItemChange())}}},W=(i("95V8"),Object(b.a)(Q,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:"编辑列",visible:e.visible,"append-to-body":!0,width:"600px"},on:{"update:visible":function(t){e.visible=t},close:e.handleCancel}},[i("div",{staticClass:"scene-name"},[e._v("您可通过拖拽管理列")]),e._v(" "),i("flexbox",{staticClass:"scene-list"},[i("div",{staticClass:"scene-list-box"},[i("flexbox",{staticClass:"scene-list-head"},[i("el-checkbox",{attrs:{indeterminate:e.isleftIndeterminate},on:{change:e.handleleftCheckAllChange},model:{value:e.checkleftAll,callback:function(t){e.checkleftAll=t},expression:"checkleftAll"}}),e._v(" "),i("div",{staticClass:"scene-list-head-name"},[e._v("显示的列")]),e._v(" "),i("div",{staticClass:"scene-list-head-detail"},[e._v(e._s(e.leftCheckItems.length+"/"+e.checkedLeftData.length))])],1),e._v(" "),i("div",{staticStyle:{position:"relative"}},[i("div",{staticClass:"scene-list-search"},[i("el-input",{attrs:{placeholder:"请输入",size:"small","suffix-icon":"el-icon-search"},on:{input:e.inputLeftChange},model:{value:e.leftInput,callback:function(t){e.leftInput=t},expression:"leftInput"}})],1),e._v(" "),i("div",{staticClass:"scene-list-body"},[i("draggable",{staticStyle:{"min-height":"100px"},attrs:{move:e.leftMove,options:{group:"list",forceFallback:!1,dragClass:"sortable-drag"}},on:{end:e.leftMoveEnd},model:{value:e.checkedLeftData,callback:function(t){e.checkedLeftData=t},expression:"checkedLeftData"}},e._l(e.checkedLeftData,function(t,s){return t.show?i("flexbox",{key:s,staticClass:"list-item"},[i("el-checkbox",{staticClass:"list-item-check",on:{change:e.leftCheckItemChange},model:{value:t.check,callback:function(i){e.$set(t,"check",i)},expression:"item.check"}}),e._v(" "),i("div",{staticClass:"list-item-name"},[e._v(e._s(t.name))])],1):e._e()}))],1)])],1),e._v(" "),i("div",{staticClass:"scene-middle-list"},[i("el-button",{staticClass:"scene-middle-left-button",class:{"scene-middle-button-select":e.rightCheckItems.length>0},attrs:{disabled:0==e.rightCheckItems.length},on:{click:function(t){e.changePositon("left")}}},[i("i",{staticClass:"el-icon-arrow-left scene-middle-icon"})]),e._v(" "),i("el-button",{staticClass:"scene-middle-right-button",class:{"scene-middle-button-select":e.leftCheckItems.length>0},attrs:{disabled:0==e.leftCheckItems.length},on:{click:function(t){e.changePositon("right")}}},[i("i",{staticClass:"el-icon-arrow-right scene-middle-icon"})])],1),e._v(" "),i("div",{staticClass:"scene-list-box"},[i("flexbox",{staticClass:"scene-list-head"},[i("el-checkbox",{attrs:{indeterminate:e.isrightIndeterminate},on:{change:e.handlerightCheckAllChange},model:{value:e.checkrightAll,callback:function(t){e.checkrightAll=t},expression:"checkrightAll"}}),e._v(" "),i("div",{staticClass:"scene-list-head-name"},[e._v("隐藏的列")]),e._v(" "),i("div",{staticClass:"scene-list-head-detail"},[e._v(e._s(e.rightCheckItems.length+"/"+e.checkedRightData.length))])],1),e._v(" "),i("div",{staticStyle:{position:"relative"}},[i("div",{staticClass:"scene-list-body"},[i("div",{staticClass:"scene-list-search"},[i("el-input",{attrs:{placeholder:"请输入",size:"small","suffix-icon":"el-icon-search"},on:{input:e.inputRightChange},model:{value:e.rightInput,callback:function(t){e.rightInput=t},expression:"rightInput"}})],1),e._v(" "),i("draggable",{staticStyle:{"min-height":"100px"},attrs:{move:e.rightMove,options:{group:"list",forceFallback:!1,dragClass:"sortable-drag"}},on:{end:e.rightMoveEnd},model:{value:e.checkedRightData,callback:function(t){e.checkedRightData=t},expression:"checkedRightData"}},e._l(e.checkedRightData,function(t,s){return t.show?i("flexbox",{key:s,staticClass:"list-item"},[i("el-checkbox",{staticClass:"list-item-check",on:{change:e.rightCheckItemChange},model:{value:t.check,callback:function(i){e.$set(t,"check",i)},expression:"item.check"}}),e._v(" "),i("div",{staticClass:"list-item-name"},[e._v(e._s(t.name))])],1):e._e()}))],1)])],1)]),e._v(" "),i("div",{staticClass:"handle-bar"},[i("div",{staticClass:"handle-bar-save"},[i("el-button",{nativeOn:{click:function(t){return e.handleCancel(t)}}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.handleConfirm(t)}}},[e._v("保存")])],1)])],1)},[],!1,null,"315acad0",null));W.options.__file="FieldsSet.vue";var X=W.exports,P=i("wd/R"),$=i.n(P),K=i("XJYT");t.a={components:{CRMListHead:I,CRMTableHead:J,FieldsSet:X},data:function(){return{loading:!1,tableHeight:document.documentElement.clientHeight-240,list:[],fieldList:[],sortData:{},currentPage:1,pageSize:r.a.get("crmPageSizes")||15,pageSizes:[15,30,60,100],total:0,search:"",rowID:"",rowType:"",showDview:!1,formatterRules:{},filterObj:{},scene_id:"",scene_name:"",showFieldSet:!1,selectionList:[]}},computed:l()({},Object(c.b)(["crm"])),mounted:function(){var e=this;window.onresize=function(){var t=document.documentElement.clientHeight,i=a()(e.filterObj).length>0?310:240;e.tableHeight=t-i},this.crm[this.crmType].index&&(this.isSeas?this.getFieldList():this.loading=!0)},methods:{getList:function(){var e=this;this.loading=!0;var t=this.getIndexRequest(),i={page:this.currentPage,limit:this.pageSize,search:this.search};for(var s in this.scene_id&&(i.scene_id=this.scene_id),this.sortData.order&&(i.order_field=this.sortData.prop,i.order_type="ascending"==this.sortData.order?"asc":"desc"),this.filterObj)i[s]=this.filterObj[s];t(i).then(function(t){"customer"===e.crmType?e.list=t.data.list.map(function(e){return e.show=!1,e}):("contract"===e.crmType&&(e.moneyData=t.data.data),e.list=t.data.list),e.total=t.data.dataCount,e.loading=!1}).catch(function(){e.loading=!1})},getIndexRequest:function(){return"leads"===this.crmType?u.e:"customer"===this.crmType?this.isSeas?h.h:h.f:"contacts"===this.crmType?m.e:"business"===this.crmType?A.c:"contract"===this.crmType?w.c:"product"===this.crmType?f.d:"receivables"===this.crmType?D.c:void 0},getFieldList:function(){var e=this;if(0==this.fieldList.length){this.loading=!0;var t={types:"crm_"+this.crmType,module:"crm",action:this.isSeas?"pool":"index"};t.controller=this.crmType,Object(p.v)(t).then(function(t){for(var i=0;i<t.data.length;i++){var s=t.data[i];if("date"===s.form_type){e.formatterRules[s.field]={formatter:function(e){return"0000-00-00"==e&&(e=""),e}}}else if("datetime"===s.form_type){e.formatterRules[s.field]={formatter:function(e){return 0!=e&&e?$()(Object(O.e)(e)).format("YYYY-MM-DD HH:mm:ss"):""}}}else if("create_user_id"===s.field||"owner_user_id"===s.field){e.formatterRules[s.field]={type:"crm",formatter:function(e){return e?e.realname:""}}}else if("user"===s.form_type){e.formatterRules[s.field]={type:"crm",formatter:function(e){if(e){for(var t="",i=0;i<e.length;i++)t=t+e[i].realname+(i===e.length-1?"":",");return t}return""}}}else if("structure"===s.form_type){e.formatterRules[s.field]={type:"crm",formatter:function(e){if(e){for(var t="",i=0;i<e.length;i++)t=t+e[i].name+(i===e.length-1?"":",");return t}return""}}}else if("contacts_id"===s.field||"customer_id"===s.field||"business_id"===s.field||"contract_id"===s.field){e.formatterRules[s.field]={type:"crm",formatter:function(e){return e?e.name:""}}}else if("status_id"===s.field||"type_id"===s.field||"category_id"===s.field||"plan_id"===s.field){e.formatterRules[s.field]={type:"crm",formatter:function(e){return e||""}}}var a=0;a=s.width?s.width:s.name&&s.name.length<=6?15*s.name.length+45:140,e.fieldList.push({prop:s.field,label:s.name,width:a})}e.getList()}).catch(function(){e.loading=!1})}else this.getList()},fieldFormatter:function(e,t){var i=this.formatterRules[t.property];return i?"crm"===i.type?t.property?i.formatter(e[t.property+"_info"])||"--":"":i.formatter(e[t.property])||"--":e[t.property]||"--"},crmSearch:function(e){this.search=e,this.fieldList.length&&this.getList()},handleRowClick:function(e,t,i){if("selection"!==t.type)if("leads"===this.crmType)"name"===t.property?(this.rowID=e.leads_id,this.showDview=!0):this.showDview=!1;else if("customer"===this.crmType){if("business-check"===t.property&&e.business_count>0)return;"name"===t.property?(this.rowID=e.customer_id,this.rowType="customer",this.showDview=!0):this.showDview=!1}else"contacts"===this.crmType?"customer_id"===t.property?(this.rowID=e.customer_id_info.customer_id,this.rowType="customer",this.showDview=!0):"name"===t.property?(this.rowID=e.contacts_id,this.rowType="contacts",this.showDview=!0):this.showDview=!1:"business"===this.crmType?"customer_id"===t.property?(this.rowID=e.customer_id_info.customer_id,this.rowType="customer",this.showDview=!0):"name"===t.property?(this.rowID=e.business_id,this.rowType="business",this.showDview=!0):this.showDview=!1:"contract"===this.crmType?"customer_id"===t.property?(this.rowID=e.customer_id_info.customer_id,this.rowType="customer",this.showDview=!0):"business_id"===t.property?(this.rowID=e.business_id_info.business_id,this.rowType="business",this.showDview=!0):"contacts_id"===t.property?(this.rowID=e.contacts_id_info.contacts_id,this.rowType="contacts",this.showDview=!0):"num"===t.property?(this.rowID=e.contract_id,this.rowType="contract",this.showDview=!0):this.showDview=!1:"product"===this.crmType?"name"===t.property?(this.rowID=e.product_id,this.showDview=!0):this.showDview=!1:"receivables"===this.crmType&&("customer_id"===t.property?(this.rowID=e.customer_id_info.customer_id,this.rowType="customer",this.showDview=!0):"contract_id"===t.property?(this.rowID=e.contract_id,this.rowType="contract",this.showDview=!0):"number"===t.property?(this.rowID=e.receivables_id,this.rowType="receivables",this.showDview=!0):this.showDview=!1)},exportInfos:function(){var e={search:this.search};for(var t in this.scene_id&&(e.scene_id=this.scene_id),this.filterObj)e[t]=this.filterObj[t];var i=void 0;i=this.isSeas?h.i:{customer:h.d,leads:u.c,contacts:m.c,product:f.b}[this.crmType];var s=K.Loading.service({fullscreen:!0,text:"导出中..."});i(e).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"}),i=document.createElement("a"),a=window.URL.createObjectURL(t);i.href=a,i.download=decodeURI(e.headers["content-disposition"].split("filename=")[1])||"",document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(a),s.close()}).catch(function(){s.close()})},handleFilter:function(e){this.filterObj=e;var t=document.documentElement.clientHeight,i=a()(this.filterObj).length>0?310:240;this.tableHeight=t-i,this.currentPage=1,this.getList()},handleScene:function(e){this.scene_id=e.id,this.scene_name=e.name,this.currentPage=1,this.getFieldList()},handleHandle:function(e){"alloc"!==e.type&&"get"!==e.type&&"transfer"!==e.type&&"transform"!==e.type&&"delete"!==e.type&&"put_seas"!==e.type||(this.showDview=!1),"edit"!==e.type&&this.getList()},setSave:function(){this.fieldList=[],this.getFieldList()},listHeadHandle:function(e){"save-success"===e.type&&(this.currentPage=1,this.getList())},handleTableSet:function(){this.showFieldSet=!0},sortChange:function(e,t,i){this.sortData=e,this.getList()},handleSelectionChange:function(e){this.selectionList=e,this.$refs.crmTableHead.headSelectionChange(e)},handleHeaderDragend:function(e,t,i,s){if(i.property){var a=this.isSeas?this.crmType+"_pool":this.crmType;Object(p.e)({types:"crm_"+a,field:i.property,width:e}).then(function(e){}).catch(function(){})}},handleSizeChange:function(e){r.a.set("crmPageSizes",e),this.pageSize=e,this.getList()},handleCurrentChange:function(e){this.currentPage=e,this.getList()},getStatusStyle:function(e){return 0==e?{"border-color":"#E6A23C","background-color":"#FDF6EC",color:"#E6A23C"}:1==e?{"border-color":"#409EFF","background-color":"#ECF5FF",color:"#409EFF"}:2==e?{"border-color":"#67C23A","background-color":"#F0F9EB",color:"#67C23A"}:3==e?{"border-color":"#F56C6B","background-color":"#FEF0F0",color:"#F56C6B"}:4==e?{"background-color":"#FFFFFF"}:void 0}},beforeDestroy:function(){}}},"l/97":function(e,t,i){},lRqb:function(e,t,i){},mBo6:function(e,t,i){},oWS4:function(e,t,i){"use strict";var s=i("QbLZ"),a=i.n(s),n=i("7Qib"),l=i("8GhS"),c=i("eE85"),o=i.n(c),r={name:"index",components:{XhUserCell:l.p,XhProuctCate:l.j,VDistpicker:o.a},props:{dialogVisible:{type:Boolean,required:!0,default:!1},fieldList:{type:Array,required:!0,default:[]},obj:{default:{},required:!0},isSeas:{type:Boolean,default:!1},crmType:{type:String,default:""}},data:function(){return{form:[],formCopy:[],visible:!1,showErrors:!1,saveChecked:!1,saveDefault:!1,saveName:null}},watch:{dialogVisible:{handler:function(e){e&&(this.form=Object(n.h)(this.obj.form),0==this.form.length&&this.form.push({field:"",name:"",form_type:"",condition:"is",value:"",typeOption:[],statusOption:[],type_id:"",status_id:"",address:{state:"",city:"",area:""}}),this.saveChecked=!1,this.saveDefault=!1,this.saveName=null),this.visible=this.dialogVisible},deep:!0,immediate:!0},form:function(){this.$nextTick(function(){var e=document.getElementById("filter-container");e.scrollTop=e.scrollHeight})}},methods:{selectProvince:function(e,t){t.address.state=e.value},selectCity:function(e,t){t.address.city=e.value},selectArea:function(e,t){t.address.area=e.value},typeOptionsChange:function(e){if(e.type_id){var t=e.typeOption.find(function(t){return t.type_id===e.type_id});e.statusOption=t.statusList||[]}else e.statusOption=[];e.status_id=""},arrayValueChange:function(e){e.value.length>0?(e.item.value=e.value,e.item.valueContent=e.valueContent):e.item.value=[]},showCalCondition:function(e){return"date"!=e&&"datetime"!=e&&"business_type"!=e&&"category"!=e&&"address"!=e},calConditionOptions:function(e,t){return"select"==e||"checkbox"==e||"user"==e?[{value:"is",label:"等于",disabled:!1},{value:"isnot",label:"不等于",disabled:!1}]:"module"==e||"text"==e||"textarea"==e?[{value:"is",label:"等于",disabled:!1},{value:"isnot",label:"不等于",disabled:!1},{value:"contains",label:"包含",disabled:!1},{value:"not_contain",label:"不包含",disabled:!1}]:"floatnumber"==e||"number"==e?[{value:"is",label:"等于",disabled:!1},{value:"isnot",label:"不等于",disabled:!1},{value:"contains",label:"包含",disabled:!1},{value:"not_contain",label:"不包含",disabled:!1},{value:"is_empty",label:"为空",disabled:!1},{value:"is_not_empty",label:"不为空",disabled:!1},{value:"gt",label:"大于",disabled:!1},{value:"egt",label:"大于等于",disabled:!1},{value:"lt",label:"小于",disabled:!1},{value:"elt",label:"小于等于",disabled:!1}]:"category"==e?[{value:"is",label:"等于",disabled:!1},{value:"isnot",label:"不等于",disabled:!1},{value:"contains",label:"包含",disabled:!1},{value:"not_contain",label:"不包含",disabled:!1}]:[{value:"is",label:"等于",disabled:!1},{value:"isnot",label:"不等于",disabled:!1},{value:"contains",label:"包含",disabled:!1},{value:"not_contain",label:"不包含",disabled:!1},{value:"start_with",label:"开始于",disabled:!1},{value:"end_with",label:"结束于",disabled:!1},{value:"is_empty",label:"为空",disabled:!1},{value:"is_not_empty",label:"不为空",disabled:!1},{value:"gt",label:"大于",disabled:!1},{value:"egt",label:"大于等于",disabled:!1},{value:"lt",label:"小于",disabled:!1},{value:"elt",label:"小于等于",disabled:!1}]},fieldChange:function(e){var t=this.fieldList.find(function(t){return t.field===e.field});t&&(e.form_type=t.form_type,e.name=t.name,"business_type"==e.form_type?(e.typeOption=t.setting,e.statusOption=[],e.type_id="",e.status_id=""):"select"==e.form_type?e.setting=t.setting||[]:"address"==e.form_type?e.address={state:"",city:"",area:""}:"date"!==e.form_type&&"datetime"!==e.form_type&&"user"!==e.form_type&&"category"!==e.form_type||(e.value=[])),this.form.filter(function(t){return t.field===e.field}).length>1?this.showErrors=!0:this.showErrors=!1},handleCancel:function(){this.$emit("update:dialogVisible",!1)},handleConfirm:function(){if(this.showErrors)this.$message.error("筛选条件中有重复项！");else if(!this.saveChecked||this.saveName&&""!==this.saveName){for(var e=0;e<this.form.length;e++){var t=this.form[e];if(!t.field||""===t.field)return void this.$message.error("要筛选的字段名称不能为空！");if("business_type"==t.form_type){if(!t.type_id&&!t.status_id)return void this.$message.error("请输入筛选条件的值！")}else if("address"==t.form_type){if(!t.address.state&&!t.address.city&&!t.address.area)return void this.$message.error("请选择筛选条件的值！")}else if("date"==t.form_type||"datetime"==t.form_type||"user"==t.form_type||"category"==t.form_type){if(!t.value||0===t.value.length)return void this.$message.error("请选择筛选条件的值！")}else if(!t.value)return void this.$message.error("请输入筛选条件的值！")}var i={};this.form.forEach(function(e){"date"==e.form_type?i[e.field]={start_date:e.value[0],end_date:e.value[1],form_type:e.form_type,name:e.name}:"datetime"==e.form_type?i[e.field]={start:Object(n.d)(e.value[0]),end:Object(n.d)(e.value[1]),form_type:e.form_type,name:e.name}:"business_type"==e.form_type?i[e.field]={type_id:e.type_id,status_id:e.status_id,form_type:e.form_type,name:e.name}:"user"==e.form_type?i[e.field]={condition:e.condition,value:e.value[0].id,form_type:e.form_type,name:e.name}:"category"==e.form_type?i[e.field]={value:e.value[e.value.length-1],form_type:e.form_type,name:e.name}:"address"==e.form_type?i[e.field]=a()({},e.address,{form_type:e.form_type,name:e.name}):i[e.field]={condition:e.condition,value:e.value,form_type:e.form_type,name:e.name}});var s={obj:i,form:this.form,saveChecked:this.saveChecked,saveDefault:this.saveDefault,saveName:this.saveName};this.$emit("filter",s)}else this.$message.error("场景名称不能为空！")},handleAdd:function(){this.form.push({field:"",condition:"is",value:"",form_type:"",setting:[],typeOption:[],statusOption:[],type_id:"",status_id:""})},handleDelete:function(e){var t=this;this.$confirm("您确定要删除这一条数据吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.form.splice(e,1)}).catch(function(){t.$message({type:"info",message:"已取消删除"})})}}},d=(i("8KYw"),i("KHd+")),h=Object(d.a)(r,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:"高级筛选",visible:e.visible,width:"900px"},on:{"update:visible":function(t){e.visible=t},close:e.handleCancel}},[i("div",{staticStyle:{"margin-bottom":"10px"}},[e._v("筛选条件")]),e._v(" "),i("el-form",{staticClass:"filter-container",attrs:{id:"filter-container"}},[i("el-form-item",[e._l(e.form,function(t,s){return[i("el-row",{key:s},[i("el-col",{attrs:{span:8}},[i("el-select",{attrs:{placeholder:"请选择要筛选的字段名"},on:{change:function(i){e.fieldChange(t)}},model:{value:t.field,callback:function(i){e.$set(t,"field",i)},expression:"formItem.field"}},e._l(e.fieldList,function(e){return i("el-option",{key:e.field,attrs:{label:e.name,value:e.field}})}))],1),e._v(" "),e.showCalCondition(t.form_type)?i("el-col",{attrs:{span:1}},[e._v(" ")]):e._e(),e._v(" "),e.showCalCondition(t.form_type)?i("el-col",{attrs:{span:4}},[i("el-select",{attrs:{placeholder:"请选择范围"},model:{value:t.condition,callback:function(i){e.$set(t,"condition",i)},expression:"formItem.condition"}},e._l(e.calConditionOptions(t.form_type,t),function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1):e._e(),e._v(" "),"business_type"==t.form_type?i("el-col",{attrs:{span:1}},[e._v(" ")]):e._e(),e._v(" "),"business_type"==t.form_type?i("el-col",{attrs:{span:4}},[i("el-select",{attrs:{placeholder:"请选择"},on:{change:function(i){e.typeOptionsChange(t)}},model:{value:t.type_id,callback:function(i){e.$set(t,"type_id",i)},expression:"formItem.type_id"}},e._l(t.typeOption,function(e){return i("el-option",{key:e.type_id,attrs:{label:e.name,value:e.type_id}})}))],1):e._e(),e._v(" "),i("el-col",{attrs:{span:1}},[e._v(" ")]),e._v(" "),i("el-col",{attrs:{span:"datetime"===t.form_type||"date"===t.form_type||"address"===t.form_type?13:8}},["select"===t.form_type?i("el-select",{attrs:{placeholder:"请选择筛选条件"},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"formItem.value"}},e._l(t.setting,function(e){return i("el-option",{key:e,attrs:{label:e,value:e}})})):"date"===t.form_type||"datetime"===t.form_type?i("el-date-picker",{staticStyle:{padding:"0px 10px"},attrs:{"value-format":"date"===t.form_type?"yyyy-MM-dd":"yyyy-MM-dd HH:mm:ss",type:"date"===t.form_type?"daterange":"datetimerange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"formItem.value"}}):"business_type"===t.form_type?i("el-select",{attrs:{placeholder:"请选择"},model:{value:t.status_id,callback:function(i){e.$set(t,"status_id",i)},expression:"formItem.status_id"}},e._l(t.statusOption,function(e){return i("el-option",{key:e.status_id,attrs:{label:e.name,value:e.status_id}})})):"user"===t.form_type?i("xh-user-cell",{attrs:{item:t,infoParams:{m:"crm",c:e.crmType,a:"index"}},on:{"value-change":e.arrayValueChange}}):"category"===t.form_type?i("xh-prouct-cate",{attrs:{item:t},on:{"value-change":e.arrayValueChange}}):"address"===t.form_type?i("v-distpicker",{attrs:{province:t.address.state,city:t.address.city,area:t.address.area},on:{province:function(i){e.selectProvince(i,t)},city:function(i){e.selectCity(i,t)},area:function(i){e.selectArea(i,t)}}}):i("el-input",{attrs:{placeholder:"请输入筛选条件"},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"formItem.value"}})],1),e._v(" "),i("el-col",{staticClass:"delete",attrs:{span:1}},[i("i",{staticClass:"el-icon-error delete-btn",on:{click:function(t){e.handleDelete(s)}}})])],1)]})],2)],1),e._v(" "),i("p",{directives:[{name:"show",rawName:"v-show",value:e.showErrors,expression:"showErrors"}],staticClass:"el-icon-warning warning-info"},[i("span",{staticClass:"desc"},[e._v("筛选条件中有重复项！")])]),e._v(" "),i("el-button",{attrs:{type:"text"},on:{click:e.handleAdd}},[e._v("+ 添加筛选条件")]),e._v(" "),e.isSeas?e._e():i("div",{staticClass:"save"},[i("el-checkbox",{model:{value:e.saveChecked,callback:function(t){e.saveChecked=t},expression:"saveChecked"}},[e._v("保存为场景")]),e._v(" "),i("el-input",{directives:[{name:"show",rawName:"v-show",value:e.saveChecked,expression:"saveChecked"}],staticClass:"name",attrs:{maxlength:10,placeholder:"请输入场景名称，最多10个字符"},model:{value:e.saveName,callback:function(t){e.saveName="string"==typeof t?t.trim():t},expression:"saveName"}}),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.saveChecked,expression:"saveChecked"}],staticClass:"save-setting"},[i("el-checkbox",{model:{value:e.saveDefault,callback:function(t){e.saveDefault=t},expression:"saveDefault"}},[e._v("设置为默认")])],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.handleCancel}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.handleConfirm}},[e._v("确 定")])],1)],1)},[],!1,null,"3bb838ef",null);h.options.__file="index.vue";t.a=h.exports},s7Zx:function(e,t,i){},svWA:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkE1NUY2OTMzRjEzRTExRTg4NDAxQkEzQkYwMjU3REExIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkE1NUY2OTM0RjEzRTExRTg4NDAxQkEzQkYwMjU3REExIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QTU1RjY5MzFGMTNFMTFFODg0MDFCQTNCRjAyNTdEQTEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QTU1RjY5MzJGMTNFMTFFODg0MDFCQTNCRjAyNTdEQTEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz70mGn0AAABSElEQVR42qyUsUoDQRRFs4tNsFTU2h8QQQQtVPwCm0UtBFE/wCJfIQrBWlBIYWQbDVgqaKEQLGItsRQU00Xtsp6RuyBhXtzFfXB2hpk7l30zbyZIkqRUZAy5TxzH/zaKouinDY15N74ODXiDRG1D49Y678QkNOEAWjKYVtvSeFM6f8p9ZvdwCUvQ7Zu/gj04lG4Onq0/dP0zuIAtj1kaXc2fSx9ahmswAbsZz8HpxrXOa7gBx/CZ0fALTrTOazgDNzmr5RamrEMZVWmkMajiA7WvMGIZvsOYZ9GgcHvYsVJ+gMWcKS/Ao2VYg00oZzQrS1+zDOvak2pGw6r0dWsPe6qpO/Ur8OExGoZ9WIF5ac2r15bI3YAnOIJrHZirgmXYgRfp2n/d5dR0Flb1IGzLrKODqyjNXpbH4Xf6pyJXBEW/2GGp4PgWYAAHtEsSK3MhmAAAAABJRU5ErkJggg=="},woQC:function(e,t,i){},zbTZ:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjdGRTgyQUFEQzBBMzExRTg4RTlCRTNDNzA5Q0RDRTJBIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjdGRTgyQUFFQzBBMzExRTg4RTlCRTNDNzA5Q0RDRTJBIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6N0ZFODJBQUJDMEEzMTFFODhFOUJFM0M3MDlDRENFMkEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6N0ZFODJBQUNDMEEzMTFFODhFOUJFM0M3MDlDRENFMkEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7S8sG0AAABaklEQVR42qyUPUsDQRCG94IgGAiagELsU6WxUmITEKwEQYJop6U2/gTxH1gldrFWEASrQDgbP4oDmzR2WqQ4IQiBCAcWviOzsA5zeyf6wtPMx8vu7dwEURQZj7pgT8TOwX5aQ8H4taDE5n0NruG0yDXAstKzwjmj9VrDWfAKQtACl+AOlBXDMueoZod7XtjDTHHRCV+PaJp8ajHG8TiiE9bBofm7yKNOJzx1Tqrpg69IWgUzKXXfXnTCicesD2pgnalxLE0TMtxMufIIbIGhExtybKTUH5CXfeVQKeiBsRIfc04qzDPYv5Y11EaFvllJiZc4J9W0htegoxRUwBVYdGJVjlWU+jPyoqcuem6wBp7F2PjqiwG2DQ32U8Ys5tEnWKIrD0D7H96DPAb2UY5BDG7BLv/4WboA29wTs4cJnAVLKygR6+sGzAmjd7AB7sX6SuQcJqKRGh6Vkz0Isx+9WYMdK7E3X8OXAAMApsZGDBJcTHwAAAAASUVORK5CYII="},zyqF:function(e,t,i){"use strict";var s=i("B4ez");i.n(s).a}}]);