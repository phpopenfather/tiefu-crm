(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2c7c"],{"0pCk":function(t,e,i){},"4lFZ":function(t,e,i){},"6R3Q":function(t,e,i){"use strict";var n={name:"reminder",components:{},computed:{},data:function(){return{}},props:{content:{type:String,default:"内容"},fontSize:{type:String,default:"13"}},mounted:function(){},methods:{},destroyed:function(){}},a=(i("7h1T"),i("KHd+")),o=Object(a.a)(n,function(){var t=this.$createElement,e=this._self._c||t;return e("flexbox",{staticClass:"reminder-wrapper"},[e("flexbox",{staticClass:"reminder-body",attrs:{align:"stretch"}},[e("i",{staticClass:"wukong wukong-reminder reminder-icon"}),this._v(" "),e("div",{staticClass:"reminder-content",style:{"font-size":this.fontSize+"px"}},[this._v("\n      "+this._s(this.content)+"\n    ")])])],1)},[],!1,null,"123d95d5",null);o.options.__file="reminder.vue";e.a=o.exports},"7h1T":function(t,e,i){"use strict";var n=i("0pCk");i.n(n).a},FSvo:function(t,e,i){"use strict";i.r(e);var n=i("sGAf"),a={name:"jurisdiction-create",components:{},data:function(){return{loading:!1,title:"",remark:"",showTreeData:[],defaultProps:{children:"children",label:"title"}}},computed:{diaTitle:function(){return"save"==this.action.type?"新建":"编辑"}},props:{show:{type:Boolean,default:!1},action:{type:Object,default:function(){return{type:"save"}}}},watch:{show:function(t){t&&this.initInfo()}},mounted:function(){},methods:{initInfo:function(){"update"==this.action.type?(this.title=this.action.data.title,this.remark=this.action.data.remark):(this.title="",this.remark="",this.$refs.tree&&this.$refs.tree.setCheckedKeys([])),0==this.showTreeData.length?this.getRulesList():this.checkTreeByUpdateInfo()},getRulesList:function(){var t=this;this.loading=!0,Object(n.f)({type:"tree"}).then(function(e){t.showTreeData=[e.data.work],t.checkTreeByUpdateInfo(),t.loading=!1}).catch(function(){t.loading=!1})},checkTreeByUpdateInfo:function(){var t=this;"update"==this.action.type&&this.$nextTick(function(){t.$refs.tree&&t.$refs.tree.setCheckedKeys(t.getUserModuleRules(t.action.data.rules.split(",")))})},sureClick:function(){var t=this;if(this.title){this.loading=!0;var e=this.$refs.tree.getCheckedKeys().concat(this.$refs.tree.getHalfCheckedKeys()),i={save:n.a,update:n.e}[this.action.type],a={type:"work",title:this.title,remark:this.remark,rules:e,pid:5};"update"==this.action.type&&(a.id=this.action.data.id),i(a).then(function(e){t.loading=!1,t.$emit("submite"),t.closeView()}).catch(function(){t.loading=!1})}else this.$message.error("请填写权限名称")},closeView:function(){this.$emit("update:show",!1)},getUserModuleRules:function(t){t||(t=[]);for(var e=this.showTreeData[0],i=!1,n=this.copyItem(t),a=0;a<e.children.length;a++){var o=e.children[a];o.children||(o.children=[]);for(var s=0;s<t.length;s++){for(var r=t[s],c=[],l=0;l<o.children.length;l++){var d=o.children[l];d.id==r&&c.push(d)}c.length!=o.children.length&&(i=!0,this.removeItem(n,o.id))}}i&&this.removeItem(n,e.id);for(var u=[],h=0;h<n.length;h++){var f=n[h];f&&u.push(parseInt(f))}return u},copyItem:function(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i]);return e},removeItem:function(t,e){for(var i=-1,n=0;n<t.length;n++)if(e==t[n]){i=n;break}i>0&&t.splice(i,1)},containItem:function(t,e){for(var i=0;i<t.length;i++)if(e==t[i])return!0;return!1}}},o=(i("SNeJ"),i("KHd+")),s=Object(o.a)(a,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"create-dialog",attrs:{title:t.diaTitle,visible:t.show,"modal-append-to-body":!0,"append-to-body":!0,"close-on-click-modal":!1,width:"700px"},on:{close:t.closeView}},[i("div",{staticClass:"label-input"},[i("label",{staticClass:"label-title"},[t._v("权限名称")]),t._v(" "),i("el-input",{attrs:{placeholder:"请输入权限名称"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),t._v(" "),i("div",{staticClass:"label-input"},[i("label",{staticClass:"label-title"},[t._v("权限描述")]),t._v(" "),i("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入权限描述"},model:{value:t.remark,callback:function(e){t.remark=e},expression:"remark"}})],1),t._v(" "),i("label",{staticClass:"label-title"},[t._v("权限配置")]),t._v(" "),i("div",{staticClass:"jurisdiction-content-checkbox"},[i("el-tree",{ref:"tree",staticStyle:{height:"0"},attrs:{data:t.showTreeData,"show-checkbox":"","node-key":"id",indent:0,"empty-text":"","default-expand-all":"","expand-on-click-node":!1,props:t.defaultProps}})],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:t.sureClick}},[t._v("确 定")]),t._v(" "),i("el-button",{on:{click:t.closeView}},[t._v("取 消")])],1)])},[],!1,null,"18e7a6da",null);s.options.__file="jurisdictionCreate.vue";var r={name:"system-project",components:{JurisdictionCreate:s.exports,Reminder:i("6R3Q").a},mixins:[],data:function(){return{loading:!1,tableHeight:document.documentElement.clientHeight-196,list:[],createAction:{type:"save"},jurisdictionCreateShow:!1}},computed:{},mounted:function(){var t=this;window.onresize=function(){t.tableHeight=document.documentElement.clientHeight-196},this.getList()},methods:{getList:function(){var t=this;this.loading=!0,Object(n.d)({type:0,pid:5}).then(function(e){t.list=e.data,t.loading=!1}).catch(function(){t.loading=!1})},addJurisdiction:function(){this.createAction={type:"save"},this.jurisdictionCreateShow=!0},handleRowClick:function(t,e,i){},handleClick:function(t,e){var i=this;"edit"===t?(this.createAction={type:"update",data:e.row},this.jurisdictionCreateShow=!0):"delete"===t&&this.$confirm("您确定要删除该审批流?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(n.c)({id:e.row.id}).then(function(t){i.list.splice(e.$index,1),i.$message({type:"success",message:"操作成功"})}).catch(function(){})}).catch(function(){i.$message({type:"info",message:"已取消删除"})})}}},c=(i("W4i/"),Object(o.a)(r,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"se-container"},[i("div",{staticClass:"se-header"},[t._v("自定义项目权限")]),t._v(" "),i("div",{staticClass:"se-body"},[i("div",{staticClass:"se-table-header"},[i("reminder",{staticClass:"project-reminder",attrs:{content:"为不同场景下的项目成员所需的权限设置匹配的项目、任务列表、任务的操作权限"}}),t._v(" "),i("el-button",{staticClass:"se-table-header-button",attrs:{type:"primary"},on:{click:t.addJurisdiction}},[t._v("新建权限")])],1),t._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"main-table",staticStyle:{width:"100%"},attrs:{id:"examine-table",data:t.list,height:t.tableHeight,"highlight-current-row":""},on:{"row-click":t.handleRowClick}},[i("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"title",width:"150",label:"项目权限"}}),t._v(" "),i("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"remark",label:"项目描述"}}),t._v(" "),i("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text",disabled:1==e.row.system,size:"small"},on:{click:function(i){t.handleClick("edit",e)}}},[t._v("编辑")]),t._v(" "),i("el-button",{attrs:{type:"text",disabled:1==e.row.system,size:"small"},on:{click:function(i){t.handleClick("delete",e)}}},[t._v("删除")])]}}])})],1)],1),t._v(" "),i("jurisdiction-create",{attrs:{show:t.jurisdictionCreateShow,action:t.createAction},on:{"update:show":function(e){t.jurisdictionCreateShow=e},submite:t.getList}})],1)},[],!1,null,"1b9a2da6",null));c.options.__file="index.vue";e.default=c.exports},SNeJ:function(t,e,i){"use strict";var n=i("ZCAr");i.n(n).a},"W4i/":function(t,e,i){"use strict";var n=i("4lFZ");i.n(n).a},ZCAr:function(t,e,i){},sGAf:function(t,e,i){"use strict";i.d(e,"d",function(){return a}),i.d(e,"f",function(){return o}),i.d(e,"a",function(){return s}),i.d(e,"c",function(){return r}),i.d(e,"b",function(){return c}),i.d(e,"e",function(){return l}),i.d(e,"h",function(){return d}),i.d(e,"g",function(){return u});var n=i("t3Un");function a(t){return Object(n.a)({url:"admin/groups/index",method:"post",data:t})}function o(t){return Object(n.a)({url:"admin/rules/index",method:"post",data:t})}function s(t){return Object(n.a)({url:"admin/groups/save",method:"post",data:t})}function r(t){return Object(n.a)({url:"admin/groups/delete",method:"post",data:t})}function c(t){return Object(n.a)({url:"admin/groups/copy",method:"post",data:t})}function l(t){return Object(n.a)({url:"admin/groups/update",method:"post",data:t})}function d(t){return Object(n.a)({url:"admin/users/groups",method:"post",data:t})}function u(t){return Object(n.a)({url:"admin/users/groupsDel",method:"post",data:t})}}}]);